{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://ReactComplexTree/webpack/universalModuleDefinition","webpack://ReactComplexTree/./src/EventEmitter.ts","webpack://ReactComplexTree/./src/controlledEnvironment/ControlledTreeEnvironment.tsx","webpack://ReactComplexTree/./src/controlledEnvironment/InteractionManagerProvider.tsx","webpack://ReactComplexTree/./src/controlledEnvironment/buildInteractionMode.ts","webpack://ReactComplexTree/./src/controlledEnvironment/layoutUtils.ts","webpack://ReactComplexTree/./src/controlledEnvironment/mergeInteractionManagers.ts","webpack://ReactComplexTree/./src/controlledEnvironment/useControlledTreeEnvironmentProps.ts","webpack://ReactComplexTree/./src/controlledEnvironment/useLinearItems.ts","webpack://ReactComplexTree/./src/drag/DragAndDropProvider.tsx","webpack://ReactComplexTree/./src/drag/DraggingPositionEvaluation.ts","webpack://ReactComplexTree/./src/drag/useCanDropAt.ts","webpack://ReactComplexTree/./src/drag/useDraggingPosition.ts","webpack://ReactComplexTree/./src/drag/useGetParentOfLinearItem.ts","webpack://ReactComplexTree/./src/drag/useGetViableDragPositions.ts","webpack://ReactComplexTree/./src/environmentActions/EnvironmentActionsProvider.tsx","webpack://ReactComplexTree/./src/environmentActions/useCreatedEnvironmentRef.ts","webpack://ReactComplexTree/./src/hotkeys/defaultKeyboardBindings.ts","webpack://ReactComplexTree/./src/hotkeys/useHotkey.ts","webpack://ReactComplexTree/./src/hotkeys/useKey.ts","webpack://ReactComplexTree/./src/hotkeys/useKeyboardBindings.ts","webpack://ReactComplexTree/./src/index.ts","webpack://ReactComplexTree/./src/interactionMode/ClickArrowToExpandInteractionManager.ts","webpack://ReactComplexTree/./src/interactionMode/ClickItemToExpandInteractionManager.ts","webpack://ReactComplexTree/./src/interactionMode/DoubleClickItemToExpandInteractionManager.ts","webpack://ReactComplexTree/./src/isControlKey.ts","webpack://ReactComplexTree/./src/renderers/createDefaultRenderers.tsx","webpack://ReactComplexTree/./src/renderers/index.ts","webpack://ReactComplexTree/./src/renderers/useRenderers.ts","webpack://ReactComplexTree/./src/search/SearchInput.tsx","webpack://ReactComplexTree/./src/search/defaultMatcher.ts","webpack://ReactComplexTree/./src/search/useSearchMatchFocus.ts","webpack://ReactComplexTree/./src/treeActions/TreeActionsProvider.tsx","webpack://ReactComplexTree/./src/treeActions/useCreatedTreeRef.ts","webpack://ReactComplexTree/./src/treeItem/TreeItemChildren.tsx","webpack://ReactComplexTree/./src/treeItem/TreeItemElement.tsx","webpack://ReactComplexTree/./src/treeItem/TreeItemRenamingInput.tsx","webpack://ReactComplexTree/./src/treeItem/useTreeItemRenderContext.ts","webpack://ReactComplexTree/./src/tree/DragBetweenLine.tsx","webpack://ReactComplexTree/./src/tree/LiveDescription.tsx","webpack://ReactComplexTree/./src/tree/MaybeLiveDescription.tsx","webpack://ReactComplexTree/./src/tree/Tree.tsx","webpack://ReactComplexTree/./src/tree/TreeManager.tsx","webpack://ReactComplexTree/./src/tree/defaultLiveDescriptors.ts","webpack://ReactComplexTree/./src/tree/getItemsLinearly.ts","webpack://ReactComplexTree/./src/tree/resolveLiveDescriptor.ts","webpack://ReactComplexTree/./src/tree/scrollIntoView.ts","webpack://ReactComplexTree/./src/tree/useCreatedTreeInformation.ts","webpack://ReactComplexTree/./src/tree/useFocusWithin.ts","webpack://ReactComplexTree/./src/tree/useMoveFocusToIndex.ts","webpack://ReactComplexTree/./src/tree/useSelectUpTo.ts","webpack://ReactComplexTree/./src/tree/useTreeKeyboardBindings.ts","webpack://ReactComplexTree/./src/tree/useViewState.ts","webpack://ReactComplexTree/./src/types.ts","webpack://ReactComplexTree/./src/uncontrolledEnvironment/CompleteTreeDataProvider.ts","webpack://ReactComplexTree/./src/uncontrolledEnvironment/StaticTreeDataProvider.ts","webpack://ReactComplexTree/./src/uncontrolledEnvironment/UncontrolledTreeEnvironment.tsx","webpack://ReactComplexTree/./src/useCallSoon.ts","webpack://ReactComplexTree/./src/useGetOriginalItemOrder.ts","webpack://ReactComplexTree/./src/useHtmlElementEventListener.ts","webpack://ReactComplexTree/./src/useIsMounted.ts","webpack://ReactComplexTree/./src/useRefCopy.ts","webpack://ReactComplexTree/./src/useSideEffect.ts","webpack://ReactComplexTree/./src/useStableHandler.ts","webpack://ReactComplexTree/./src/utils.ts","webpack://ReactComplexTree/./src/waitFor.ts","webpack://ReactComplexTree/external umd \"React\"","webpack://ReactComplexTree/webpack/bootstrap","webpack://ReactComplexTree/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactComplexTree\"] = factory(require(\"React\"));\n\telse\n\t\troot[\"ReactComplexTree\"] = factory(root[\"React\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__1024__) => {\nreturn ","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventEmitter = void 0;\r\nvar EventEmitter = /** @class */ (function () {\r\n    function EventEmitter(options) {\r\n        this.handlerCount = 0;\r\n        this.handlers = [];\r\n        this.options = options;\r\n    }\r\n    Object.defineProperty(EventEmitter.prototype, \"numberOfHandlers\", {\r\n        get: function () {\r\n            return this.handlers.filter(function (h) { return !!h; }).length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    EventEmitter.prototype.emit = function (payload) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promises, _i, _c, handler, res;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        promises = [];\r\n                        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'emit', payload);\r\n                        for (_i = 0, _c = this.handlers; _i < _c.length; _i++) {\r\n                            handler = _c[_i];\r\n                            if (handler) {\r\n                                res = handler(payload);\r\n                                if (typeof (res === null || res === void 0 ? void 0 : res.then) === 'function') {\r\n                                    promises.push(res);\r\n                                }\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(promises)];\r\n                    case 1:\r\n                        _d.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EventEmitter.prototype.on = function (handler) {\r\n        var _a, _b;\r\n        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'on');\r\n        this.handlers.push(handler);\r\n        // eslint-disable-next-line no-plusplus\r\n        return this.handlerCount++;\r\n    };\r\n    EventEmitter.prototype.off = function (handlerId) {\r\n        this.delete(handlerId);\r\n    };\r\n    EventEmitter.prototype.delete = function (handlerId) {\r\n        var _a, _b;\r\n        (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.logger) === null || _b === void 0 ? void 0 : _b.call(_a, 'off');\r\n        this.handlers[handlerId] = null;\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexports.EventEmitter = EventEmitter;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ControlledTreeEnvironment = exports.useTreeEnvironment = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar InteractionManagerProvider_1 = require(\"./InteractionManagerProvider\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar EnvironmentActionsProvider_1 = require(\"../environmentActions/EnvironmentActionsProvider\");\r\nvar useControlledTreeEnvironmentProps_1 = require(\"./useControlledTreeEnvironmentProps\");\r\nvar TreeEnvironmentContext = React.createContext(null);\r\nvar useTreeEnvironment = function () { return (0, react_1.useContext)(TreeEnvironmentContext); };\r\nexports.useTreeEnvironment = useTreeEnvironment;\r\nexports.ControlledTreeEnvironment = React.forwardRef(function (props, ref) {\r\n    var _a, _b, _c;\r\n    var environmentContextProps = (0, useControlledTreeEnvironmentProps_1.useControlledTreeEnvironmentProps)(props);\r\n    var viewState = props.viewState;\r\n    // Make sure that every tree view state has a focused item\r\n    for (var _i = 0, _d = Object.keys(environmentContextProps.trees); _i < _d.length; _i++) {\r\n        var treeId = _d[_i];\r\n        // TODO if the focus item is dragged out of the tree and is not within the expanded items\r\n        // TODO of that tree, the tree does not show any focus item anymore.\r\n        // Fix: use linear items to see if focus item is visible, and reset if not. Only refresh that\r\n        // information when the viewstate changes\r\n        if (!((_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.focusedItem) &&\r\n            environmentContextProps.trees[treeId]) {\r\n            viewState[treeId] = __assign(__assign({}, viewState[treeId]), { focusedItem: (_c = (_b = props.items[environmentContextProps.trees[treeId].rootItem]) === null || _b === void 0 ? void 0 : _b.children) === null || _c === void 0 ? void 0 : _c[0] });\r\n        }\r\n    }\r\n    return (React.createElement(TreeEnvironmentContext.Provider, { value: environmentContextProps },\r\n        React.createElement(InteractionManagerProvider_1.InteractionManagerProvider, null,\r\n            React.createElement(DragAndDropProvider_1.DragAndDropProvider, null,\r\n                React.createElement(EnvironmentActionsProvider_1.EnvironmentActionsProvider, { ref: ref }, props.children)))));\r\n});\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InteractionManagerProvider = exports.useInteractionManager = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar types_1 = require(\"../types\");\r\nvar ControlledTreeEnvironment_1 = require(\"./ControlledTreeEnvironment\");\r\nvar mergeInteractionManagers_1 = require(\"./mergeInteractionManagers\");\r\nvar buildInteractionMode_1 = require(\"./buildInteractionMode\");\r\nvar InteractionManagerContext = React.createContext(null);\r\nvar useInteractionManager = function () {\r\n    return React.useContext(InteractionManagerContext);\r\n};\r\nexports.useInteractionManager = useInteractionManager;\r\nvar InteractionManagerProvider = function (_a) {\r\n    var children = _a.children;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var defaultInteractionMode = environment.defaultInteractionMode;\r\n    var interactionManager = (0, react_1.useMemo)(function () {\r\n        var _a;\r\n        if (defaultInteractionMode && typeof defaultInteractionMode !== 'string') {\r\n            if (defaultInteractionMode.extends) {\r\n                return (0, mergeInteractionManagers_1.mergeInteractionManagers)(defaultInteractionMode, (0, buildInteractionMode_1.buildInteractionMode)(defaultInteractionMode.extends, environment));\r\n            }\r\n            return defaultInteractionMode;\r\n        }\r\n        return (0, buildInteractionMode_1.buildInteractionMode)((_a = defaultInteractionMode) !== null && _a !== void 0 ? _a : types_1.InteractionMode.ClickItemToExpand, environment);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); // TODO make sure that environment does not need to be refreshed\r\n    return (React.createElement(InteractionManagerContext.Provider, { value: interactionManager }, children));\r\n};\r\nexports.InteractionManagerProvider = InteractionManagerProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.buildInteractionMode = void 0;\r\nvar types_1 = require(\"../types\");\r\nvar DoubleClickItemToExpandInteractionManager_1 = require(\"../interactionMode/DoubleClickItemToExpandInteractionManager\");\r\nvar ClickItemToExpandInteractionManager_1 = require(\"../interactionMode/ClickItemToExpandInteractionManager\");\r\nvar ClickArrowToExpandInteractionManager_1 = require(\"../interactionMode/ClickArrowToExpandInteractionManager\");\r\nvar buildInteractionMode = function (mode, environment) {\r\n    switch (mode) {\r\n        case types_1.InteractionMode.DoubleClickItemToExpand:\r\n            return new DoubleClickItemToExpandInteractionManager_1.DoubleClickItemToExpandInteractionManager(environment);\r\n        case types_1.InteractionMode.ClickItemToExpand:\r\n            return new ClickItemToExpandInteractionManager_1.ClickItemToExpandInteractionManager(environment);\r\n        case types_1.InteractionMode.ClickArrowToExpand:\r\n            return new ClickArrowToExpandInteractionManager_1.ClickArrowToExpandInteractionManager(environment);\r\n        default:\r\n            throw Error(\"Unknown interaction mode \".concat(mode));\r\n    }\r\n};\r\nexports.buildInteractionMode = buildInteractionMode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isOutsideOfContainer = exports.computeItemHeightArray = exports.computeItemHeight = void 0;\r\nvar utils_1 = require(\"../utils\");\r\nvar computeItemHeight = function (treeId) {\r\n    var _a, _b;\r\n    var firstItem = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-container=\\\"true\\\"]\"));\r\n    return (_b = firstItem === null || firstItem === void 0 ? void 0 : firstItem.offsetHeight) !== null && _b !== void 0 ? _b : 5;\r\n};\r\nexports.computeItemHeight = computeItemHeight;\r\nvar computeItemHeightArray = function (treeId) {\r\n    var document = (0, utils_1.getDocument)();\r\n    if (!document) {\r\n        console.log(\"Document not found\");\r\n        return [];\r\n    }\r\n    var items = document.querySelectorAll(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-container=\\\"true\\\"]\"));\r\n    var itemHeights = Array.from(items).map(function (item) { return item.offsetHeight; });\r\n    console.log({ itemHeights: itemHeights });\r\n    return itemHeights;\r\n};\r\nexports.computeItemHeightArray = computeItemHeightArray;\r\nvar isOutsideOfContainer = function (e, treeBb) {\r\n    return e.clientX < treeBb.left ||\r\n        e.clientX > treeBb.right ||\r\n        e.clientY < treeBb.top ||\r\n        e.clientY > treeBb.bottom;\r\n};\r\nexports.isOutsideOfContainer = isOutsideOfContainer;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.mergeInteractionManagers = void 0;\r\nvar mergeInteractionManagers = function (main, fallback) { return ({\r\n    mode: main.mode,\r\n    createInteractiveElementProps: function (item, treeId, actions, renderFlags) { return (__assign(__assign({}, fallback.createInteractiveElementProps(item, treeId, actions, renderFlags)), main.createInteractiveElementProps(item, treeId, actions, renderFlags))); },\r\n}); };\r\nexports.mergeInteractionManagers = mergeInteractionManagers;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useControlledTreeEnvironmentProps = void 0;\r\nvar react_1 = require(\"react\");\r\nvar scrollIntoView_1 = require(\"../tree/scrollIntoView\");\r\nvar useRenderers_1 = require(\"../renderers/useRenderers\");\r\nvar utils_1 = require(\"../utils\");\r\nvar getItemsLinearly_1 = require(\"../tree/getItemsLinearly\");\r\nvar useRefCopy_1 = require(\"../useRefCopy\");\r\nvar useControlledTreeEnvironmentProps = function (_a) {\r\n    var onExpandItemProp = _a.onExpandItem, onCollapseProp = _a.onCollapseItem, onDropProp = _a.onDrop, props = __rest(_a, [\"onExpandItem\", \"onCollapseItem\", \"onDrop\"]);\r\n    var _b = (0, react_1.useState)({}), trees = _b[0], setTrees = _b[1];\r\n    var _c = (0, react_1.useState)(), activeTreeId = _c[0], setActiveTreeId = _c[1];\r\n    var treeIds = (0, react_1.useMemo)(function () { return Object.keys(trees); }, [trees]);\r\n    var onFocusItem = props.onFocusItem, autoFocus = props.autoFocus, onRegisterTree = props.onRegisterTree, onUnregisterTree = props.onUnregisterTree, items = props.items, viewState = props.viewState;\r\n    var onFocusItemRef = (0, useRefCopy_1.useRefCopy)(onFocusItem);\r\n    var viewStateRef = (0, useRefCopy_1.useRefCopy)(viewState);\r\n    var linearItems = (0, react_1.useMemo)(function () {\r\n        return (0, utils_1.buildMapForTrees)(treeIds, function (treeId) { var _a; return (0, getItemsLinearly_1.getItemsLinearly)(trees[treeId].rootItem, (_a = viewState[treeId]) !== null && _a !== void 0 ? _a : {}, items); });\r\n    }, [trees, items, treeIds, viewState]);\r\n    var onFocusItemHandler = (0, react_1.useCallback)(function (item, treeId, setDomFocus) {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        if (setDomFocus === void 0) { setDomFocus = true; }\r\n        if ((autoFocus !== null && autoFocus !== void 0 ? autoFocus : true) && setDomFocus) {\r\n            var newItem = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-id=\\\"\").concat(item.index, \"\\\"]\"));\r\n            if (((_d = (_c = (_b = (0, utils_1.getDocument)()) === null || _b === void 0 ? void 0 : _b.activeElement) === null || _c === void 0 ? void 0 : _c.attributes.getNamedItem('data-rct-search-input')) === null || _d === void 0 ? void 0 : _d.value) !== 'true') {\r\n                // Move DOM focus to item if the current focus is not on the search input\r\n                (_e = newItem === null || newItem === void 0 ? void 0 : newItem.focus) === null || _e === void 0 ? void 0 : _e.call(newItem);\r\n            }\r\n            else {\r\n                // Otherwise just manually scroll into view\r\n                (0, scrollIntoView_1.scrollIntoView)(newItem);\r\n            }\r\n        }\r\n        if (((_f = viewStateRef.current[treeId]) === null || _f === void 0 ? void 0 : _f.focusedItem) === item.index) {\r\n            return;\r\n        }\r\n        (_g = onFocusItemRef.current) === null || _g === void 0 ? void 0 : _g.call(onFocusItemRef, item, treeId);\r\n    }, [autoFocus, onFocusItemRef, viewStateRef]);\r\n    var registerTree = (0, react_1.useCallback)(function (tree) {\r\n        setTrees(function (trees) {\r\n            var _a;\r\n            return (__assign(__assign({}, trees), (_a = {}, _a[tree.treeId] = tree, _a)));\r\n        });\r\n        onRegisterTree === null || onRegisterTree === void 0 ? void 0 : onRegisterTree(tree);\r\n    }, [onRegisterTree]);\r\n    var unregisterTree = (0, react_1.useCallback)(function (treeId) {\r\n        onUnregisterTree === null || onUnregisterTree === void 0 ? void 0 : onUnregisterTree(trees[treeId]);\r\n        delete trees[treeId];\r\n        setTrees(trees);\r\n    }, [onUnregisterTree, trees]);\r\n    var onCollapseItem = (0, react_1.useCallback)(function (item, treeId) {\r\n        onCollapseProp === null || onCollapseProp === void 0 ? void 0 : onCollapseProp(item, treeId);\r\n        setTrees(function (trees) { return trees; });\r\n    }, [onCollapseProp]);\r\n    var onExpandItem = (0, react_1.useCallback)(function (item, treeId) {\r\n        onExpandItemProp === null || onExpandItemProp === void 0 ? void 0 : onExpandItemProp(item, treeId);\r\n        setTrees(function (trees) { return trees; });\r\n    }, [onExpandItemProp]);\r\n    var onDrop = (0, react_1.useCallback)(function (items, target) {\r\n        onDropProp === null || onDropProp === void 0 ? void 0 : onDropProp(items, target);\r\n        setTrees(function (trees) { return trees; });\r\n    }, [onDropProp]);\r\n    var focusTree = (0, react_1.useCallback)(function (treeId) {\r\n        var _a, _b;\r\n        var focusItem = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-focus=\\\"true\\\"]\"));\r\n        (_b = focusItem === null || focusItem === void 0 ? void 0 : focusItem.focus) === null || _b === void 0 ? void 0 : _b.call(focusItem);\r\n    }, []);\r\n    var setActiveTree = (0, react_1.useCallback)(function (treeIdOrSetStateFunction, autoFocusTree) {\r\n        if (autoFocusTree === void 0) { autoFocusTree = true; }\r\n        var maybeFocusTree = function (treeId) {\r\n            var _a, _b;\r\n            if (autoFocusTree &&\r\n                (autoFocus !== null && autoFocus !== void 0 ? autoFocus : true) &&\r\n                treeId &&\r\n                !((_b = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"]\"))) === null || _b === void 0 ? void 0 : _b.contains(document.activeElement))) {\r\n                focusTree(treeId);\r\n            }\r\n        };\r\n        if (typeof treeIdOrSetStateFunction === 'function') {\r\n            setActiveTreeId(function (oldValue) {\r\n                var treeId = treeIdOrSetStateFunction(oldValue);\r\n                if (treeId !== oldValue) {\r\n                    maybeFocusTree(treeId);\r\n                }\r\n                return treeId;\r\n            });\r\n        }\r\n        else {\r\n            var treeId = treeIdOrSetStateFunction;\r\n            setActiveTreeId(treeId);\r\n            maybeFocusTree(treeId);\r\n        }\r\n    }, [autoFocus, focusTree]);\r\n    var renderers = (0, useRenderers_1.useRenderers)(props);\r\n    return __assign(__assign(__assign({}, renderers), props), { onFocusItem: onFocusItemHandler, registerTree: registerTree, unregisterTree: unregisterTree, onExpandItem: onExpandItem, onCollapseItem: onCollapseItem, onDrop: onDrop, setActiveTree: setActiveTree, treeIds: treeIds, trees: trees, activeTreeId: activeTreeId, linearItems: linearItems });\r\n};\r\nexports.useControlledTreeEnvironmentProps = useControlledTreeEnvironmentProps;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useLinearItems = void 0;\r\nvar ControlledTreeEnvironment_1 = require(\"./ControlledTreeEnvironment\");\r\nvar useLinearItems = function (treeId) {\r\n    return (0, ControlledTreeEnvironment_1.useTreeEnvironment)().linearItems[treeId];\r\n};\r\nexports.useLinearItems = useLinearItems;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DragAndDropProvider = exports.useDragAndDrop = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useCanDropAt_1 = require(\"./useCanDropAt\");\r\nvar useGetViableDragPositions_1 = require(\"./useGetViableDragPositions\");\r\nvar useSideEffect_1 = require(\"../useSideEffect\");\r\nvar utils_1 = require(\"../utils\");\r\nvar useCallSoon_1 = require(\"../useCallSoon\");\r\nvar useStableHandler_1 = require(\"../useStableHandler\");\r\nvar useGetOriginalItemOrder_1 = require(\"../useGetOriginalItemOrder\");\r\nvar useDraggingPosition_1 = require(\"./useDraggingPosition\");\r\nvar DragAndDropContext = React.createContext(null);\r\nvar useDragAndDrop = function () { return React.useContext(DragAndDropContext); };\r\nexports.useDragAndDrop = useDragAndDrop;\r\nvar DragAndDropProvider = function (_a) {\r\n    var children = _a.children;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var _b = (0, react_1.useState)(false), isProgrammaticallyDragging = _b[0], setIsProgrammaticallyDragging = _b[1];\r\n    var _c = (0, react_1.useState)({}), viableDragPositions = _c[0], setViableDragPositions = _c[1];\r\n    var _d = (0, react_1.useState)(0), programmaticDragIndex = _d[0], setProgrammaticDragIndex = _d[1];\r\n    var _e = (0, react_1.useState)(), draggingPosition = _e[0], setDraggingPosition = _e[1];\r\n    var getViableDragPositions = (0, useGetViableDragPositions_1.useGetViableDragPositions)();\r\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\r\n    var getOriginalItemOrder = (0, useGetOriginalItemOrder_1.useGetOriginalItemOrder)();\r\n    var _f = (0, useDraggingPosition_1.useDraggingPosition)(), initiateDraggingPosition = _f.initiateDraggingPosition, resetDraggingPosition = _f.resetDraggingPosition, draggingItems = _f.draggingItems, getDraggingPosition = _f.getDraggingPosition, itemHeight = _f.itemHeight, itemsHeightArray = _f.itemsHeightArray;\r\n    var resetProgrammaticDragIndexForCurrentTree = (0, react_1.useCallback)(function (viableDragPositions, draggingItems) {\r\n        var _a;\r\n        if (environment.activeTreeId &&\r\n            ((_a = environment.viewState[environment.activeTreeId]) === null || _a === void 0 ? void 0 : _a.focusedItem) &&\r\n            environment.linearItems &&\r\n            draggingItems) {\r\n            var focusItem_1 = environment.viewState[environment.activeTreeId].focusedItem;\r\n            var treeDragPositions = getViableDragPositions(environment.activeTreeId, draggingItems);\r\n            var newPos = treeDragPositions.findIndex(function (pos) {\r\n                if (pos.targetType === 'item') {\r\n                    return pos.targetItem === focusItem_1;\r\n                }\r\n                if (pos.targetType === 'between-items') {\r\n                    return (environment.items[pos.parentItem].children[pos.childIndex] ===\r\n                        focusItem_1);\r\n                }\r\n                return false;\r\n            });\r\n            if (newPos) {\r\n                setProgrammaticDragIndex(Math.min(newPos + 1, treeDragPositions.length - 1));\r\n            }\r\n            else {\r\n                setProgrammaticDragIndex(0);\r\n            }\r\n        }\r\n        else {\r\n            setProgrammaticDragIndex(0);\r\n        }\r\n    }, [\r\n        environment.activeTreeId,\r\n        environment.items,\r\n        environment.linearItems,\r\n        environment.viewState,\r\n        getViableDragPositions,\r\n    ]);\r\n    var resetState = (0, useStableHandler_1.useStableHandler)(function () {\r\n        setIsProgrammaticallyDragging(false);\r\n        setViableDragPositions({});\r\n        setProgrammaticDragIndex(0);\r\n        setDraggingPosition(undefined);\r\n        resetDraggingPosition();\r\n    });\r\n    (0, useSideEffect_1.useSideEffect)(function () {\r\n        if (environment.activeTreeId &&\r\n            environment.linearItems[environment.activeTreeId] &&\r\n            viableDragPositions[environment.activeTreeId]) {\r\n            resetProgrammaticDragIndexForCurrentTree(viableDragPositions[environment.activeTreeId], draggingItems);\r\n        }\r\n    }, [\r\n        draggingItems,\r\n        environment.activeTreeId,\r\n        environment.linearItems,\r\n        resetProgrammaticDragIndexForCurrentTree,\r\n        viableDragPositions,\r\n    ], [environment.activeTreeId]);\r\n    (0, useSideEffect_1.useSideEffect)(function () {\r\n        if (isProgrammaticallyDragging && environment.activeTreeId) {\r\n            setDraggingPosition(viableDragPositions[environment.activeTreeId][programmaticDragIndex]);\r\n        }\r\n    }, [\r\n        programmaticDragIndex,\r\n        environment.activeTreeId,\r\n        isProgrammaticallyDragging,\r\n        viableDragPositions,\r\n    ], [programmaticDragIndex, environment.activeTreeId]);\r\n    var canDropAt = (0, useCanDropAt_1.useCanDropAt)();\r\n    var performDrag = function (draggingPosition) {\r\n        var _a;\r\n        if (draggingItems && !canDropAt(draggingPosition, draggingItems)) {\r\n            return;\r\n        }\r\n        setDraggingPosition(draggingPosition);\r\n        environment.setActiveTree(draggingPosition.treeId);\r\n        if (draggingItems && environment.activeTreeId !== draggingPosition.treeId) {\r\n            // TODO maybe do only if draggingItems are different to selectedItems\r\n            (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, draggingItems.map(function (item) { return item.index; }), draggingPosition.treeId);\r\n        }\r\n    };\r\n    var onDragOverTreeHandler = (0, useStableHandler_1.useStableHandler)(function (e, treeId, containerRef) {\r\n        if (!draggingItems)\r\n            return;\r\n        var newDraggingPosition = getDraggingPosition(e, treeId, containerRef);\r\n        if (!newDraggingPosition)\r\n            return;\r\n        if (newDraggingPosition === 'invalid') {\r\n            setDraggingPosition(undefined);\r\n            return;\r\n        }\r\n        performDrag(newDraggingPosition);\r\n    });\r\n    var onDropHandler = (0, useStableHandler_1.useStableHandler)(function () {\r\n        if (!draggingItems || !draggingPosition || !environment.onDrop) {\r\n            return;\r\n        }\r\n        environment.onDrop(draggingItems, draggingPosition);\r\n        callSoon(function () {\r\n            var _a;\r\n            (_a = environment.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(environment, draggingItems[0], draggingPosition.treeId);\r\n            resetState();\r\n        });\r\n    });\r\n    var onStartDraggingItems = (0, react_1.useCallback)(function (items, treeId) {\r\n        var treeViableDragPositions = (0, utils_1.buildMapForTrees)(environment.treeIds, function (treeId) { return getViableDragPositions(treeId, items); });\r\n        initiateDraggingPosition(treeId, items);\r\n        // TODO what if trees have different heights and drag target changes?\r\n        setViableDragPositions(treeViableDragPositions);\r\n        if (environment.activeTreeId) {\r\n            resetProgrammaticDragIndexForCurrentTree(treeViableDragPositions[environment.activeTreeId], items);\r\n        }\r\n    }, [\r\n        environment.activeTreeId,\r\n        environment.treeIds,\r\n        getViableDragPositions,\r\n        initiateDraggingPosition,\r\n        resetProgrammaticDragIndexForCurrentTree,\r\n    ]);\r\n    var startProgrammaticDrag = (0, react_1.useCallback)(function () {\r\n        var _a, _b, _c;\r\n        if (!environment.canDragAndDrop) {\r\n            return;\r\n        }\r\n        if (environment.activeTreeId) {\r\n            var draggingItems_1 = (_b = (_a = environment.viewState[environment.activeTreeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) !== null && _b !== void 0 ? _b : [\r\n                (_c = environment.viewState[environment.activeTreeId]) === null || _c === void 0 ? void 0 : _c.focusedItem,\r\n            ];\r\n            if (draggingItems_1.length === 0 || draggingItems_1[0] === undefined) {\r\n                return;\r\n            }\r\n            var resolvedDraggingItems = getOriginalItemOrder(environment.activeTreeId, draggingItems_1.map(function (id) { return environment.items[id]; }));\r\n            if (environment.canDrag && !environment.canDrag(resolvedDraggingItems)) {\r\n                return;\r\n            }\r\n            onStartDraggingItems(resolvedDraggingItems, environment.activeTreeId);\r\n            setTimeout(function () {\r\n                setIsProgrammaticallyDragging(true);\r\n                // Needs to be done after onStartDraggingItems was called, so that viableDragPositions is populated\r\n            });\r\n        }\r\n    }, [environment, getOriginalItemOrder, onStartDraggingItems]);\r\n    var abortProgrammaticDrag = (0, react_1.useCallback)(function () {\r\n        resetState();\r\n    }, [resetState]);\r\n    var completeProgrammaticDrag = (0, react_1.useCallback)(function () {\r\n        onDropHandler();\r\n        resetState();\r\n    }, [onDropHandler, resetState]);\r\n    var programmaticDragUp = (0, react_1.useCallback)(function () {\r\n        setProgrammaticDragIndex(function (oldIndex) { return Math.max(0, oldIndex - 1); });\r\n    }, []);\r\n    var programmaticDragDown = (0, react_1.useCallback)(function () {\r\n        if (environment.activeTreeId) {\r\n            setProgrammaticDragIndex(function (oldIndex) {\r\n                return Math.min(viableDragPositions[environment.activeTreeId].length, oldIndex + 1);\r\n            });\r\n        }\r\n    }, [environment.activeTreeId, viableDragPositions]);\r\n    var dnd = (0, react_1.useMemo)(function () { return ({\r\n        onStartDraggingItems: onStartDraggingItems,\r\n        startProgrammaticDrag: startProgrammaticDrag,\r\n        abortProgrammaticDrag: abortProgrammaticDrag,\r\n        completeProgrammaticDrag: completeProgrammaticDrag,\r\n        programmaticDragUp: programmaticDragUp,\r\n        programmaticDragDown: programmaticDragDown,\r\n        draggingItems: draggingItems,\r\n        draggingPosition: draggingPosition,\r\n        itemHeight: itemHeight.current,\r\n        itemsHeightArray: itemsHeightArray.current,\r\n        isProgrammaticallyDragging: isProgrammaticallyDragging,\r\n        onDragOverTreeHandler: onDragOverTreeHandler,\r\n        viableDragPositions: viableDragPositions,\r\n    }); }, [\r\n        abortProgrammaticDrag,\r\n        completeProgrammaticDrag,\r\n        draggingItems,\r\n        draggingPosition,\r\n        isProgrammaticallyDragging,\r\n        itemHeight,\r\n        itemsHeightArray,\r\n        onDragOverTreeHandler,\r\n        onStartDraggingItems,\r\n        programmaticDragDown,\r\n        programmaticDragUp,\r\n        startProgrammaticDrag,\r\n        viableDragPositions,\r\n    ]);\r\n    (0, react_1.useEffect)(function () {\r\n        window.addEventListener('dragend', resetState);\r\n        window.addEventListener('drop', onDropHandler);\r\n        return function () {\r\n            window.removeEventListener('dragend', resetState);\r\n            window.removeEventListener('drop', onDropHandler);\r\n        };\r\n    }, [onDropHandler, resetState]);\r\n    return (React.createElement(DragAndDropContext.Provider, { value: dnd }, children));\r\n};\r\nexports.DragAndDropProvider = DragAndDropProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DraggingPositionEvaluation = void 0;\r\nvar DraggingPositionEvaluation = /** @class */ (function () {\r\n    function DraggingPositionEvaluation(env, e, treeId, hoveringPosition, draggingItems, getParentOfLinearItem) {\r\n        this.env = env;\r\n        this.e = e;\r\n        this.treeId = treeId;\r\n        this.linearIndex = hoveringPosition.linearIndex;\r\n        this.offset = hoveringPosition.offset;\r\n        this.indentation = hoveringPosition.indentation;\r\n        this.targetItem = this.env.linearItems[this.treeId][this.linearIndex];\r\n        this.getParentOfLinearItem = getParentOfLinearItem;\r\n        this.draggingItems = draggingItems;\r\n    }\r\n    DraggingPositionEvaluation.prototype.getEmptyTreeDragPosition = function () {\r\n        return {\r\n            targetType: 'root',\r\n            treeId: this.treeId,\r\n            depth: 0,\r\n            linearIndex: 0,\r\n            targetItem: this.env.trees[this.treeId].rootItem,\r\n        };\r\n    };\r\n    /**\r\n     * If reordering is not allowed, dragging on non-folder items redirects\r\n     * the drag target to the parent of the target item.\r\n     */\r\n    DraggingPositionEvaluation.prototype.maybeRedirectToParent = function () {\r\n        var redirectTargetToParent = !this.env.canReorderItems &&\r\n            !this.env.canDropOnNonFolder &&\r\n            !this.env.items[this.targetItem.item].isFolder;\r\n        if (redirectTargetToParent) {\r\n            var _a = this.getParentOfLinearItem(this.linearIndex, this.treeId), parentLinearIndex = _a.parentLinearIndex, parent_1 = _a.parent;\r\n            this.targetItem = parent_1;\r\n            this.linearIndex = parentLinearIndex;\r\n        }\r\n    };\r\n    /**\r\n     * If the item is the last in a group, and the drop is at the bottom,\r\n     * the x-coordinate of the mouse allows to reparent upwards.\r\n     */\r\n    DraggingPositionEvaluation.prototype.maybeReparentUpwards = function () {\r\n        var _a, _b;\r\n        if (this.indentation === undefined) {\r\n            return undefined;\r\n        }\r\n        var treeLinearItems = this.env.linearItems[this.treeId];\r\n        var deepestDepth = treeLinearItems[this.linearIndex].depth;\r\n        // Default to zero on last position to allow dropping on root when\r\n        // dropping at bottom\r\n        var legalDropDepthCount = // itemDepthDifferenceToNextItem/isLastInGroup\r\n         deepestDepth - ((_b = (_a = treeLinearItems[this.linearIndex + 1]) === null || _a === void 0 ? void 0 : _a.depth) !== null && _b !== void 0 ? _b : 0);\r\n        var canReparentUpwards = this.offset === 'bottom' && legalDropDepthCount > 0;\r\n        if (!canReparentUpwards) {\r\n            return undefined;\r\n        }\r\n        var droppingIndent = Math.max(deepestDepth - legalDropDepthCount, this.indentation);\r\n        var newParent = {\r\n            parentLinearIndex: this.linearIndex,\r\n            parent: this.targetItem,\r\n        };\r\n        var insertionItemAbove;\r\n        for (var i = deepestDepth; i >= droppingIndent; i -= 1) {\r\n            insertionItemAbove = newParent;\r\n            newParent = this.getParentOfLinearItem(newParent.parentLinearIndex, this.treeId);\r\n        }\r\n        if (this.indentation === treeLinearItems[this.linearIndex].depth) {\r\n            return undefined;\r\n        }\r\n        if (!insertionItemAbove) {\r\n            return undefined;\r\n        }\r\n        var reparentedChildIndex = this.env.items[newParent.parent.item].children.indexOf(insertionItemAbove.parent.item) + 1;\r\n        if (this.draggingItems &&\r\n            this.isDescendant(this.treeId, newParent.parentLinearIndex + 1, this.draggingItems)) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            targetType: 'between-items',\r\n            treeId: this.treeId,\r\n            parentItem: newParent.parent.item,\r\n            depth: droppingIndent,\r\n            linearIndex: this.linearIndex + 1,\r\n            childIndex: reparentedChildIndex,\r\n            linePosition: 'bottom',\r\n        };\r\n    };\r\n    /**\r\n     * Don't allow to drop at bottom of an open folder, since that will place\r\n     * it visually at a different position. Redirect the drag target to the\r\n     * top of the folder contents in that case.\r\n     */\r\n    DraggingPositionEvaluation.prototype.maybeRedirectInsideOpenFolder = function () {\r\n        var nextItem = this.env.linearItems[this.treeId][this.linearIndex + 1];\r\n        var redirectInsideOpenFolder = !this.env.canDropBelowOpenFolders &&\r\n            nextItem &&\r\n            this.targetItem.depth === nextItem.depth - 1 &&\r\n            this.offset === 'bottom';\r\n        if (redirectInsideOpenFolder) {\r\n            this.targetItem = nextItem;\r\n            this.linearIndex += 1;\r\n            this.offset = 'top';\r\n        }\r\n    };\r\n    /**\r\n     * Inside a folder, only drop at bottom offset to make it visually\r\n     * consistent. This also maps to bottom offset for items below open\r\n     * subtrees, to keep the x-coordinate based dropping consistent (only\r\n     * if indentation is defined).\r\n     */\r\n    DraggingPositionEvaluation.prototype.maybeMapToBottomOffset = function () {\r\n        var priorItem = this.env.linearItems[this.treeId][this.linearIndex - 1];\r\n        if (!priorItem || (priorItem === null || priorItem === void 0 ? void 0 : priorItem.depth) === undefined)\r\n            return;\r\n        var depthDistanceToPrior = priorItem.depth - this.targetItem.depth;\r\n        if (this.offset === 'top' &&\r\n            (depthDistanceToPrior === 0 ||\r\n                (depthDistanceToPrior > 0 && this.indentation !== undefined))) {\r\n            this.offset = 'bottom';\r\n            this.linearIndex -= 1;\r\n            this.targetItem = this.env.linearItems[this.treeId][this.linearIndex];\r\n        }\r\n    };\r\n    DraggingPositionEvaluation.prototype.canDropAtCurrentTarget = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var targetItemData = this.env.items[this.targetItem.item];\r\n        if (!this.offset &&\r\n            !this.env.canDropOnNonFolder &&\r\n            !targetItemData.isFolder) {\r\n            return false;\r\n        }\r\n        if (!this.offset && !this.env.canDropOnFolder && targetItemData.isFolder) {\r\n            return false;\r\n        }\r\n        if (this.offset && !this.env.canReorderItems) {\r\n            return false;\r\n        }\r\n        if ((_a = this.draggingItems) === null || _a === void 0 ? void 0 : _a.some(function (draggingItem) { return draggingItem.index === _this.targetItem.item; })) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    DraggingPositionEvaluation.prototype.getDraggingPosition = function () {\r\n        if (this.env.linearItems[this.treeId].length === 0) {\r\n            return this.getEmptyTreeDragPosition();\r\n        }\r\n        if (!this.draggingItems ||\r\n            this.linearIndex < 0 ||\r\n            this.linearIndex >= this.env.linearItems[this.treeId].length) {\r\n            return undefined;\r\n        }\r\n        this.maybeRedirectToParent();\r\n        this.maybeRedirectInsideOpenFolder();\r\n        this.maybeMapToBottomOffset();\r\n        var reparented = this.maybeReparentUpwards();\r\n        if (reparented) {\r\n            return reparented;\r\n        }\r\n        if (this.areDraggingItemsDescendantOfTarget()) {\r\n            return undefined;\r\n        }\r\n        if (!this.canDropAtCurrentTarget()) {\r\n            return undefined;\r\n        }\r\n        var parent = this.getParentOfLinearItem(this.linearIndex, this.treeId).parent;\r\n        var newChildIndex = this.env.items[parent.item].children.indexOf(this.targetItem.item) +\r\n            (this.offset === 'top' ? 0 : 1);\r\n        if (this.offset) {\r\n            return {\r\n                targetType: 'between-items',\r\n                treeId: this.treeId,\r\n                parentItem: parent.item,\r\n                depth: this.targetItem.depth,\r\n                linearIndex: this.linearIndex + (this.offset === 'top' ? 0 : 1),\r\n                childIndex: newChildIndex,\r\n                linePosition: this.offset,\r\n            };\r\n        }\r\n        return {\r\n            targetType: 'item',\r\n            treeId: this.treeId,\r\n            parentItem: parent.item,\r\n            targetItem: this.targetItem.item,\r\n            depth: this.targetItem.depth,\r\n            linearIndex: this.linearIndex,\r\n        };\r\n    };\r\n    DraggingPositionEvaluation.prototype.isDescendant = function (treeId, itemLinearIndex, potentialParents) {\r\n        // console.log('descendant check', itemLinearIndex, potentialParents);\r\n        var _a = this.getParentOfLinearItem(itemLinearIndex, treeId), parentLinearIndex = _a.parentLinearIndex, parent = _a.parent;\r\n        if (potentialParents.find(function (p) { return p.index === parent.item; })) {\r\n            return true;\r\n        }\r\n        if (parent.depth === 0) {\r\n            return false;\r\n        }\r\n        return this.isDescendant(treeId, parentLinearIndex, potentialParents);\r\n    };\r\n    DraggingPositionEvaluation.prototype.areDraggingItemsDescendantOfTarget = function () {\r\n        return (this.draggingItems &&\r\n            this.isDescendant(this.treeId, this.linearIndex, this.draggingItems));\r\n    };\r\n    return DraggingPositionEvaluation;\r\n}());\r\nexports.DraggingPositionEvaluation = DraggingPositionEvaluation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useCanDropAt = void 0;\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useCanDropAt = function () {\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    return (0, react_1.useCallback)(function (draggingPosition, draggingItems) {\r\n        if (draggingPosition.targetType === 'between-items') {\r\n            if (!environment.canReorderItems) {\r\n                return false;\r\n            }\r\n        }\r\n        else if (draggingPosition.targetType === 'root') {\r\n            if (!environment.canDropOnFolder) {\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            var resolvedItem = environment.items[draggingPosition.targetItem];\r\n            if (!resolvedItem ||\r\n                (!environment.canDropOnFolder && resolvedItem.isFolder) ||\r\n                (!environment.canDropOnNonFolder && !resolvedItem.isFolder)) {\r\n                return false;\r\n            }\r\n        }\r\n        if (environment.canDropAt &&\r\n            (!draggingItems ||\r\n                !environment.canDropAt(draggingItems, draggingPosition))) {\r\n            // setDraggingPosition(undefined);\r\n            return false;\r\n        }\r\n        return true;\r\n    }, [environment]);\r\n};\r\nexports.useCanDropAt = useCanDropAt;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useDraggingPosition = void 0;\r\nvar react_1 = require(\"react\");\r\nvar layoutUtils_1 = require(\"../controlledEnvironment/layoutUtils\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useStableHandler_1 = require(\"../useStableHandler\");\r\nvar DraggingPositionEvaluation_1 = require(\"./DraggingPositionEvaluation\");\r\nvar useGetParentOfLinearItem_1 = require(\"./useGetParentOfLinearItem\");\r\nvar useDraggingPosition = function () {\r\n    var dragCode = (0, react_1.useRef)('initial');\r\n    var _a = (0, react_1.useState)(undefined), draggingItems = _a[0], setDraggingItems = _a[1];\r\n    var itemHeight = (0, react_1.useRef)(0);\r\n    var itemsHeightArray = (0, react_1.useRef)([0]);\r\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var getParentOfLinearItem = (0, useGetParentOfLinearItem_1.useGetGetParentOfLinearItem)();\r\n    var isNewDragPosition = (0, useStableHandler_1.useStableHandler)(function (e, treeId, hoveringPosition) {\r\n        if (!hoveringPosition) {\r\n            return false;\r\n        }\r\n        var offset = hoveringPosition.offset, linearIndex = hoveringPosition.linearIndex;\r\n        var newDragCode = \"\".concat(treeId, \"__\").concat(linearIndex, \"__\").concat(offset !== null && offset !== void 0 ? offset : '', \"__\").concat(hoveringPosition.indentation);\r\n        if (newDragCode !== dragCode.current) {\r\n            dragCode.current = newDragCode;\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    /**\r\n     * Returns undefined for invalid drop targets, like outside the tree.\r\n     */\r\n    var getHoveringPosition = (0, useStableHandler_1.useStableHandler)(function (e, treeId, containerRef) {\r\n        if (!containerRef.current) {\r\n            return undefined;\r\n        }\r\n        itemsHeightArray.current = (0, layoutUtils_1.computeItemHeightArray)(treeId);\r\n        var treeBb = containerRef.current.getBoundingClientRect();\r\n        if ((0, layoutUtils_1.isOutsideOfContainer)(e, treeBb)) {\r\n            return undefined;\r\n        }\r\n        var clientYRelativeToTreeTop = e.clientY - treeBb.top;\r\n        var cumulativeHeight = 0;\r\n        var linearIndex = 0;\r\n        var hoveringPosition = 0;\r\n        for (var i = 0; i < itemsHeightArray.current.length; i++) {\r\n            cumulativeHeight += itemsHeightArray.current[i];\r\n            if (clientYRelativeToTreeTop <= cumulativeHeight) {\r\n                linearIndex = i;\r\n                // Calculate hovering position as a fraction within the current item\r\n                var previousItemsHeight = cumulativeHeight - itemsHeightArray.current[i];\r\n                hoveringPosition = linearIndex + (clientYRelativeToTreeTop - previousItemsHeight) / itemsHeightArray.current[i];\r\n                break;\r\n            }\r\n        }\r\n        var treeLinearItems = env.linearItems[treeId];\r\n        // const linearIndexx = Math.min(\r\n        //   Math.max(0, Math.floor(hoveringPosition)),\r\n        //   treeLinearItems.length - 1\r\n        // );\r\n        if (treeLinearItems.length === 0) {\r\n            return {\r\n                linearIndex: 0,\r\n                offset: 'bottom',\r\n                indentation: 0,\r\n            };\r\n        }\r\n        var targetLinearItem = treeLinearItems[linearIndex];\r\n        var targetItem = env.items[targetLinearItem.item];\r\n        var indentation = !env.renderDepthOffset\r\n            ? undefined\r\n            : Math.max(Math.floor((e.clientX - treeBb.left) / env.renderDepthOffset), 0);\r\n        var offset;\r\n        var lineThreshold = !env.canReorderItems\r\n            ? 0\r\n            : ((targetItem === null || targetItem === void 0 ? void 0 : targetItem.isFolder) && env.canDropOnFolder) ||\r\n                env.canDropOnNonFolder\r\n                ? 0.2\r\n                : 0.5;\r\n        if (hoveringPosition - 0.5 >= treeLinearItems.length - 1) {\r\n            // very bottom, always use offset \"bottom\"\r\n            offset = 'bottom';\r\n        }\r\n        else if (hoveringPosition % 1 < lineThreshold) {\r\n            offset = 'top';\r\n        }\r\n        else if (hoveringPosition % 1 > 1 - lineThreshold) {\r\n            offset = 'bottom';\r\n        }\r\n        return { linearIndex: linearIndex, offset: offset, indentation: indentation };\r\n    });\r\n    // returning undefined means calling onDragAtPosition(undefined), returning a dropposition means calling onPerformDrag(dropposition)\r\n    // TODO old function sometimes returned undefined when old state could be kept; is it okay to also return undefined to enter invalid drop state here? e.g. !this.draggingItems, !canDragAndDrop...\r\n    var getDraggingPosition = (0, useStableHandler_1.useStableHandler)(function (e, treeId, containerRef) {\r\n        var hoveringPosition = getHoveringPosition(e, treeId, containerRef);\r\n        if (!isNewDragPosition(e, treeId, hoveringPosition)) {\r\n            return undefined;\r\n        }\r\n        if (!draggingItems ||\r\n            !env.canDragAndDrop ||\r\n            !hoveringPosition ||\r\n            e.clientX < 0 ||\r\n            e.clientY < 0) {\r\n            return 'invalid';\r\n        }\r\n        return new DraggingPositionEvaluation_1.DraggingPositionEvaluation(env, e, treeId, hoveringPosition, draggingItems, getParentOfLinearItem).getDraggingPosition();\r\n    });\r\n    var initiateDraggingPosition = (0, useStableHandler_1.useStableHandler)(function (treeId, items) {\r\n        setDraggingItems(items);\r\n        dragCode.current = 'initial';\r\n        itemHeight.current = (0, layoutUtils_1.computeItemHeight)(treeId);\r\n        itemsHeightArray.current = (0, layoutUtils_1.computeItemHeightArray)(treeId);\r\n    });\r\n    var resetDraggingPosition = (0, useStableHandler_1.useStableHandler)(function () {\r\n        setDraggingItems(undefined);\r\n        dragCode.current = 'initial';\r\n        itemHeight.current = 0;\r\n        itemsHeightArray.current = [0];\r\n    });\r\n    return {\r\n        initiateDraggingPosition: initiateDraggingPosition,\r\n        resetDraggingPosition: resetDraggingPosition,\r\n        draggingItems: draggingItems,\r\n        getDraggingPosition: getDraggingPosition,\r\n        itemHeight: itemHeight,\r\n        itemsHeightArray: itemsHeightArray,\r\n    };\r\n};\r\nexports.useDraggingPosition = useDraggingPosition;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useGetGetParentOfLinearItem = void 0;\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useGetGetParentOfLinearItem = function () {\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    return (0, react_1.useCallback)(function (itemLinearIndex, treeId) {\r\n        var linearItems = environment.linearItems[treeId];\r\n        var depth = linearItems[itemLinearIndex].depth;\r\n        var parentLinearIndex = itemLinearIndex;\r\n        for (; !!linearItems[parentLinearIndex] &&\r\n            linearItems[parentLinearIndex].depth !== depth - 1; parentLinearIndex -= 1)\r\n            ;\r\n        var parent = linearItems[parentLinearIndex];\r\n        if (!parent) {\r\n            parent = { item: environment.trees[treeId].rootItem, depth: 0 };\r\n            parentLinearIndex = 0;\r\n        }\r\n        return { parent: parent, parentLinearIndex: parentLinearIndex };\r\n    }, [environment.linearItems, environment.trees]);\r\n};\r\nexports.useGetGetParentOfLinearItem = useGetGetParentOfLinearItem;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useGetViableDragPositions = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useGetParentOfLinearItem_1 = require(\"./useGetParentOfLinearItem\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useCanDropAt_1 = require(\"./useCanDropAt\");\r\nvar useGetViableDragPositions = function () {\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var getParentOfLinearItem = (0, useGetParentOfLinearItem_1.useGetGetParentOfLinearItem)();\r\n    var canDropAt = (0, useCanDropAt_1.useCanDropAt)();\r\n    return (0, react_1.useCallback)(function (treeId, draggingItems) {\r\n        var linearItems = environment.linearItems[treeId];\r\n        return linearItems\r\n            .map(function (_a, linearIndex) {\r\n            var _b, _c;\r\n            var item = _a.item, depth = _a.depth;\r\n            var parent = getParentOfLinearItem(linearIndex, treeId).parent;\r\n            var childIndex = environment.items[parent.item].children.indexOf(item);\r\n            var itemPosition = {\r\n                targetType: 'item',\r\n                parentItem: parent.item,\r\n                targetItem: item,\r\n                linearIndex: linearIndex,\r\n                depth: depth,\r\n                treeId: treeId,\r\n            };\r\n            var topPosition = {\r\n                targetType: 'between-items',\r\n                parentItem: parent.item,\r\n                linePosition: 'top',\r\n                childIndex: childIndex,\r\n                depth: depth,\r\n                treeId: treeId,\r\n                linearIndex: linearIndex,\r\n            };\r\n            var bottomPosition = {\r\n                targetType: 'between-items',\r\n                parentItem: parent.item,\r\n                linePosition: 'bottom',\r\n                linearIndex: linearIndex + 1,\r\n                childIndex: childIndex + 1,\r\n                depth: depth,\r\n                treeId: treeId,\r\n            };\r\n            var skipTopPosition = depth === ((_c = (_b = linearItems[linearIndex - 1]) === null || _b === void 0 ? void 0 : _b.depth) !== null && _c !== void 0 ? _c : -1);\r\n            if (skipTopPosition) {\r\n                return [itemPosition, bottomPosition];\r\n            }\r\n            return [topPosition, itemPosition, bottomPosition];\r\n        })\r\n            .reduce(function (a, b) { return __spreadArray(__spreadArray([], a, true), b, true); }, [])\r\n            .filter(function (position) { return canDropAt(position, draggingItems); });\r\n    }, [\r\n        canDropAt,\r\n        environment.items,\r\n        environment.linearItems,\r\n        getParentOfLinearItem,\r\n    ]);\r\n};\r\nexports.useGetViableDragPositions = useGetViableDragPositions;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EnvironmentActionsProvider = exports.useEnvironmentActions = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useCreatedEnvironmentRef_1 = require(\"./useCreatedEnvironmentRef\");\r\nvar useRefCopy_1 = require(\"../useRefCopy\");\r\nvar waitFor_1 = require(\"../waitFor\");\r\nvar EnvironmentActionsContext = React.createContext(null);\r\nvar useEnvironmentActions = function () {\r\n    return React.useContext(EnvironmentActionsContext);\r\n};\r\nexports.useEnvironmentActions = useEnvironmentActions;\r\nvar recursiveExpand = function (itemId, items, onExpand) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var _loop_1, _i, _a, childId;\r\n    var _b, _c, _d;\r\n    return __generator(this, function (_e) {\r\n        _loop_1 = function (childId) {\r\n            (0, waitFor_1.waitFor)(function () { var _a; return !!((_a = items.current) === null || _a === void 0 ? void 0 : _a[childId]); }).then(function () {\r\n                var _a;\r\n                var item = (_a = items.current) === null || _a === void 0 ? void 0 : _a[childId];\r\n                if (item === null || item === void 0 ? void 0 : item.isFolder) {\r\n                    onExpand(item);\r\n                    recursiveExpand(childId, items, onExpand);\r\n                }\r\n            });\r\n        };\r\n        for (_i = 0, _a = (_d = (_c = (_b = items.current) === null || _b === void 0 ? void 0 : _b[itemId]) === null || _c === void 0 ? void 0 : _c.children) !== null && _d !== void 0 ? _d : []; _i < _a.length; _i++) {\r\n            childId = _a[_i];\r\n            _loop_1(childId);\r\n        }\r\n        return [2 /*return*/];\r\n    });\r\n}); };\r\nexports.EnvironmentActionsProvider = React.forwardRef(function (props, ref) {\r\n    var _a = (0, ControlledTreeEnvironment_1.useTreeEnvironment)(), onCollapseItem = _a.onCollapseItem, items = _a.items, trees = _a.trees, viewState = _a.viewState, onExpandItem = _a.onExpandItem, onFocusItem = _a.onFocusItem, setActiveTree = _a.setActiveTree, onRenameItem = _a.onRenameItem, onSelectItems = _a.onSelectItems, onPrimaryAction = _a.onPrimaryAction, linearItems = _a.linearItems;\r\n    var _b = (0, DragAndDropProvider_1.useDragAndDrop)(), abortProgrammaticDrag = _b.abortProgrammaticDrag, completeProgrammaticDrag = _b.completeProgrammaticDrag, programmaticDragDown = _b.programmaticDragDown, programmaticDragUp = _b.programmaticDragUp, startProgrammaticDrag = _b.startProgrammaticDrag;\r\n    var itemsRef = (0, useRefCopy_1.useRefCopy)(items);\r\n    // TODO replace callbacks with stable handlers\r\n    var collapseItem = (0, react_1.useCallback)(function (itemId, treeId) {\r\n        onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\r\n    }, [items, onCollapseItem]);\r\n    var expandItem = (0, react_1.useCallback)(function (itemId, treeId) {\r\n        onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(items[itemId], treeId);\r\n    }, [items, onExpandItem]);\r\n    var focusItem = (0, react_1.useCallback)(function (itemId, treeId, setDomFocus) {\r\n        if (setDomFocus === void 0) { setDomFocus = true; }\r\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(items[itemId], treeId, setDomFocus);\r\n    }, [items, onFocusItem]);\r\n    var focusTree = (0, react_1.useCallback)(function (treeId, autoFocus) {\r\n        if (autoFocus === void 0) { autoFocus = true; }\r\n        setActiveTree(treeId, autoFocus);\r\n    }, [setActiveTree]);\r\n    var moveFocusDown = (0, react_1.useCallback)(function (treeId) {\r\n        var treeLinearItems = linearItems[treeId];\r\n        var currentFocusIndex = treeLinearItems.findIndex(function (_a) {\r\n            var _b;\r\n            var item = _a.item;\r\n            return item === ((_b = viewState[treeId]) === null || _b === void 0 ? void 0 : _b.focusedItem);\r\n        });\r\n        var newIndex = currentFocusIndex !== undefined\r\n            ? Math.min(treeLinearItems.length - 1, currentFocusIndex + 1)\r\n            : 0;\r\n        var newItem = items[treeLinearItems[newIndex].item];\r\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newItem, treeId);\r\n    }, [items, linearItems, onFocusItem, viewState]);\r\n    var moveFocusUp = (0, react_1.useCallback)(function (treeId) {\r\n        var treeLinearItems = linearItems[treeId];\r\n        var currentFocusIndex = treeLinearItems.findIndex(function (_a) {\r\n            var _b;\r\n            var item = _a.item;\r\n            return item === ((_b = viewState[treeId]) === null || _b === void 0 ? void 0 : _b.focusedItem);\r\n        });\r\n        var newIndex = currentFocusIndex !== undefined\r\n            ? Math.max(0, currentFocusIndex - 1)\r\n            : 0;\r\n        var newItem = items[treeLinearItems[newIndex].item];\r\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newItem, treeId);\r\n    }, [items, linearItems, onFocusItem, viewState]);\r\n    var renameItem = (0, react_1.useCallback)(function (itemId, name, treeId) {\r\n        onRenameItem === null || onRenameItem === void 0 ? void 0 : onRenameItem(items[itemId], name, treeId);\r\n    }, [items, onRenameItem]);\r\n    var selectItems = (0, react_1.useCallback)(function (itemsIds, treeId) {\r\n        onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(itemsIds, treeId);\r\n    }, [onSelectItems]);\r\n    var toggleItemExpandedState = (0, react_1.useCallback)(function (itemId, treeId) {\r\n        var _a, _b;\r\n        if ((_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.expandedItems) === null || _b === void 0 ? void 0 : _b.includes(itemId)) {\r\n            onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\r\n        }\r\n        else {\r\n            onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(items[itemId], treeId);\r\n        }\r\n    }, [items, onCollapseItem, onExpandItem, viewState]);\r\n    var toggleItemSelectStatus = (0, react_1.useCallback)(function (itemId, treeId) {\r\n        var _a, _b, _c, _d, _e;\r\n        if ((_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) === null || _b === void 0 ? void 0 : _b.includes(itemId)) {\r\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems((_d = (_c = viewState[treeId].selectedItems) === null || _c === void 0 ? void 0 : _c.filter(function (item) { return item !== itemId; })) !== null && _d !== void 0 ? _d : [], treeId);\r\n        }\r\n        else {\r\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(__spreadArray(__spreadArray([], ((_e = viewState[treeId].selectedItems) !== null && _e !== void 0 ? _e : []), true), [itemId], false), treeId);\r\n        }\r\n    }, [onSelectItems, viewState]);\r\n    var invokePrimaryAction = (0, react_1.useCallback)(function (itemId, treeId) {\r\n        onPrimaryAction === null || onPrimaryAction === void 0 ? void 0 : onPrimaryAction(items[itemId], treeId);\r\n    }, [items, onPrimaryAction]);\r\n    var expandSubsequently = (0, react_1.useCallback)(function (treeId, itemIds) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var current, rest;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    current = itemIds[0], rest = itemIds.slice(1);\r\n                    return [4 /*yield*/, (0, waitFor_1.waitFor)(function () { var _a; return !!((_a = itemsRef.current) === null || _a === void 0 ? void 0 : _a[current]); }).then(function () {\r\n                            var item = itemsRef.current[current];\r\n                            if (!item) {\r\n                                return;\r\n                            }\r\n                            onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(item, treeId);\r\n                            expandSubsequently(treeId, rest);\r\n                        })];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [itemsRef, onExpandItem]);\r\n    var expandAll = (0, react_1.useCallback)(function (treeId) { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, recursiveExpand(trees[treeId].rootItem, itemsRef, function (item) {\r\n                        return onExpandItem === null || onExpandItem === void 0 ? void 0 : onExpandItem(item, treeId);\r\n                    })];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [itemsRef, onExpandItem, trees]);\r\n    var collapseAll = (0, react_1.useCallback)(function (treeId) {\r\n        var _a, _b;\r\n        for (var _i = 0, _c = (_b = (_a = viewState[treeId]) === null || _a === void 0 ? void 0 : _a.expandedItems) !== null && _b !== void 0 ? _b : []; _i < _c.length; _i++) {\r\n            var itemId = _c[_i];\r\n            onCollapseItem === null || onCollapseItem === void 0 ? void 0 : onCollapseItem(items[itemId], treeId);\r\n        }\r\n    }, [items, onCollapseItem, viewState]);\r\n    // TODO change environment childs to use actions rather than output events where possible\r\n    var actions = (0, react_1.useMemo)(function () { return ({\r\n        collapseItem: collapseItem,\r\n        expandItem: expandItem,\r\n        focusItem: focusItem,\r\n        focusTree: focusTree,\r\n        moveFocusDown: moveFocusDown,\r\n        moveFocusUp: moveFocusUp,\r\n        renameItem: renameItem,\r\n        selectItems: selectItems,\r\n        toggleItemExpandedState: toggleItemExpandedState,\r\n        toggleItemSelectStatus: toggleItemSelectStatus,\r\n        invokePrimaryAction: invokePrimaryAction,\r\n        expandAll: expandAll,\r\n        expandSubsequently: expandSubsequently,\r\n        collapseAll: collapseAll,\r\n        abortProgrammaticDrag: abortProgrammaticDrag,\r\n        completeProgrammaticDrag: completeProgrammaticDrag,\r\n        moveProgrammaticDragPositionDown: programmaticDragDown,\r\n        moveProgrammaticDragPositionUp: programmaticDragUp,\r\n        startProgrammaticDrag: startProgrammaticDrag,\r\n    }); }, [\r\n        collapseItem,\r\n        expandItem,\r\n        focusItem,\r\n        focusTree,\r\n        moveFocusDown,\r\n        moveFocusUp,\r\n        renameItem,\r\n        selectItems,\r\n        toggleItemExpandedState,\r\n        toggleItemSelectStatus,\r\n        invokePrimaryAction,\r\n        expandAll,\r\n        expandSubsequently,\r\n        collapseAll,\r\n        abortProgrammaticDrag,\r\n        completeProgrammaticDrag,\r\n        programmaticDragDown,\r\n        programmaticDragUp,\r\n        startProgrammaticDrag,\r\n    ]);\r\n    (0, useCreatedEnvironmentRef_1.useCreatedEnvironmentRef)(ref, actions);\r\n    return (React.createElement(EnvironmentActionsContext.Provider, { value: actions }, props.children));\r\n});\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useCreatedEnvironmentRef = void 0;\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar useCreatedEnvironmentRef = function (ref, actions) {\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    (0, react_1.useImperativeHandle)(ref, function () { return (__assign(__assign(__assign({}, actions), environment), { treeEnvironmentContext: environment, dragAndDropContext: dnd })); });\r\n};\r\nexports.useCreatedEnvironmentRef = useCreatedEnvironmentRef;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.defaultKeyboardBindings = void 0;\r\nexports.defaultKeyboardBindings = {\r\n    expandSiblings: ['control+*'],\r\n    moveFocusToFirstItem: ['home'],\r\n    moveFocusToLastItem: ['end'],\r\n    primaryAction: ['enter'],\r\n    renameItem: ['f2'],\r\n    abortRenameItem: ['escape'],\r\n    toggleSelectItem: ['control+space'],\r\n    abortSearch: ['escape', 'enter'],\r\n    startSearch: [],\r\n    selectAll: ['control+a'],\r\n    startProgrammaticDnd: ['control+d'],\r\n    completeProgrammaticDnd: ['enter'],\r\n    abortProgrammaticDnd: ['escape'],\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useHotkey = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\r\nvar useKeyboardBindings_1 = require(\"./useKeyboardBindings\");\r\nvar useCallSoon_1 = require(\"../useCallSoon\");\r\nvar utils_1 = require(\"../utils\");\r\nvar elementsThatCanTakeText = ['input', 'textarea'];\r\nvar useHotkey = function (combinationName, onHit, active, activatableWhileFocusingInput) {\r\n    if (activatableWhileFocusingInput === void 0) { activatableWhileFocusingInput = false; }\r\n    var pressedKeys = (0, react_1.useRef)([]);\r\n    var keyboardBindings = (0, useKeyboardBindings_1.useKeyboardBindings)();\r\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\r\n    var possibleCombinations = (0, react_1.useMemo)(function () {\r\n        return keyboardBindings[combinationName].map(function (combination) {\r\n            return combination.split('+');\r\n        });\r\n    }, [combinationName, keyboardBindings]);\r\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)((0, utils_1.getDocument)(), 'keydown', function (e) {\r\n        var _a;\r\n        if (active === false) {\r\n            return;\r\n        }\r\n        if ((elementsThatCanTakeText.includes((_a = e.target.tagName) === null || _a === void 0 ? void 0 : _a.toLowerCase()) ||\r\n            e.target.isContentEditable) &&\r\n            !activatableWhileFocusingInput) {\r\n            // Skip if an input is selected\r\n            return;\r\n        }\r\n        if (!pressedKeys.current.includes(e.key)) {\r\n            pressedKeys.current.push(e.key);\r\n            var pressedKeysLowercase_1 = pressedKeys.current.map(function (key) {\r\n                return key.toLowerCase();\r\n            });\r\n            var partialMatch = possibleCombinations\r\n                .map(function (combination) {\r\n                return pressedKeysLowercase_1\r\n                    .map(function (key) { return combination.includes(key.toLowerCase()); })\r\n                    .reduce(function (a, b) { return a && b; }, true);\r\n            })\r\n                .reduce(function (a, b) { return a || b; }, false);\r\n            if (partialMatch) {\r\n                if (pressedKeys.current.length > 1 || !/^[a-zA-Z]$/.test(e.key)) {\r\n                    // Prevent default, but not if this is the first input and a letter (which should trigger a search)\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)((0, utils_1.getDocument)(), 'keyup', function (e) {\r\n        if (active === false) {\r\n            return;\r\n        }\r\n        var pressedKeysLowercase = pressedKeys.current.map(function (key) {\r\n            return key.toLowerCase();\r\n        });\r\n        var match = possibleCombinations\r\n            .map(function (combination) {\r\n            return combination\r\n                .map(function (key) { return pressedKeysLowercase.includes(key.toLowerCase()); })\r\n                .reduce(function (a, b) { return a && b; }, true);\r\n        })\r\n            .reduce(function (a, b) { return a || b; }, false);\r\n        if (match) {\r\n            callSoon(function () { return onHit(e); });\r\n        }\r\n        pressedKeys.current = pressedKeys.current.filter(function (key) { return key !== e.key; });\r\n    });\r\n};\r\nexports.useHotkey = useHotkey;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useKey = void 0;\r\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\r\nvar utils_1 = require(\"../utils\");\r\nvar useKey = function (key, onHit, active) {\r\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)((0, utils_1.getDocument)(), 'keydown', function (e) {\r\n        if (!active) {\r\n            return;\r\n        }\r\n        if (active && key.toLowerCase() === e.key.toLowerCase()) {\r\n            onHit(e);\r\n        }\r\n    });\r\n};\r\nexports.useKey = useKey;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useKeyboardBindings = void 0;\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar defaultKeyboardBindings_1 = require(\"./defaultKeyboardBindings\");\r\nvar useKeyboardBindings = function () {\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    return (0, react_1.useMemo)(function () {\r\n        if (environment.keyboardBindings) {\r\n            return __assign(__assign({}, defaultKeyboardBindings_1.defaultKeyboardBindings), environment.keyboardBindings);\r\n        }\r\n        return defaultKeyboardBindings_1.defaultKeyboardBindings;\r\n    }, [environment.keyboardBindings]);\r\n};\r\nexports.useKeyboardBindings = useKeyboardBindings;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.INTERNALS = void 0;\r\nvar TreeItemElement_1 = require(\"./treeItem/TreeItemElement\");\r\nvar TreeItemChildren_1 = require(\"./treeItem/TreeItemChildren\");\r\n__exportStar(require(\"./controlledEnvironment/ControlledTreeEnvironment\"), exports);\r\n__exportStar(require(\"./tree/Tree\"), exports);\r\n__exportStar(require(\"./uncontrolledEnvironment/UncontrolledTreeEnvironment\"), exports);\r\n__exportStar(require(\"./uncontrolledEnvironment/StaticTreeDataProvider\"), exports);\r\n__exportStar(require(\"./types\"), exports);\r\n__exportStar(require(\"./renderers\"), exports);\r\n__exportStar(require(\"./treeItem/useTreeItemRenderContext\"), exports);\r\n__exportStar(require(\"./controlledEnvironment/useControlledTreeEnvironmentProps\"), exports);\r\nexports.INTERNALS = {\r\n    TreeItemElement: TreeItemElement_1.TreeItemElement,\r\n    TreeItemChildren: TreeItemChildren_1.TreeItemChildren,\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ClickArrowToExpandInteractionManager = void 0;\r\nvar types_1 = require(\"../types\");\r\nvar isControlKey_1 = require(\"../isControlKey\");\r\nvar ClickArrowToExpandInteractionManager = /** @class */ (function () {\r\n    function ClickArrowToExpandInteractionManager(environment) {\r\n        this.mode = types_1.InteractionMode.ClickItemToExpand;\r\n        this.environment = environment;\r\n    }\r\n    ClickArrowToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\r\n        var _this = this;\r\n        return {\r\n            onClick: function (e) {\r\n                actions.focusItem();\r\n                if (e.shiftKey) {\r\n                    actions.selectUpTo(!(0, isControlKey_1.isControlKey)(e));\r\n                }\r\n                else if ((0, isControlKey_1.isControlKey)(e)) {\r\n                    if (renderFlags.isSelected) {\r\n                        actions.unselectItem();\r\n                    }\r\n                    else {\r\n                        actions.addToSelectedItems();\r\n                    }\r\n                }\r\n                else {\r\n                    actions.selectItem();\r\n                    if (!item.isFolder ||\r\n                        _this.environment.canInvokePrimaryActionOnItemContainer) {\r\n                        actions.primaryAction();\r\n                    }\r\n                }\r\n            },\r\n            onFocus: function () {\r\n                actions.focusItem();\r\n            },\r\n            onDragStart: function (e) {\r\n                e.dataTransfer.dropEffect = 'move';\r\n                actions.startDragging();\r\n            },\r\n            onDragOver: function (e) {\r\n                e.preventDefault(); // Allow drop\r\n            },\r\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\r\n            tabIndex: !renderFlags.isRenaming\r\n                ? renderFlags.isFocused\r\n                    ? 0\r\n                    : -1\r\n                : undefined,\r\n        };\r\n    };\r\n    return ClickArrowToExpandInteractionManager;\r\n}());\r\nexports.ClickArrowToExpandInteractionManager = ClickArrowToExpandInteractionManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ClickItemToExpandInteractionManager = void 0;\r\nvar types_1 = require(\"../types\");\r\nvar isControlKey_1 = require(\"../isControlKey\");\r\nvar ClickItemToExpandInteractionManager = /** @class */ (function () {\r\n    function ClickItemToExpandInteractionManager(environment) {\r\n        this.mode = types_1.InteractionMode.ClickItemToExpand;\r\n        this.environment = environment;\r\n    }\r\n    ClickItemToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\r\n        var _this = this;\r\n        return {\r\n            onClick: function (e) {\r\n                actions.focusItem();\r\n                if (e.shiftKey) {\r\n                    actions.selectUpTo(!(0, isControlKey_1.isControlKey)(e));\r\n                }\r\n                else if ((0, isControlKey_1.isControlKey)(e)) {\r\n                    if (renderFlags.isSelected) {\r\n                        actions.unselectItem();\r\n                    }\r\n                    else {\r\n                        actions.addToSelectedItems();\r\n                    }\r\n                }\r\n                else {\r\n                    if (item.isFolder) {\r\n                        actions.toggleExpandedState();\r\n                    }\r\n                    actions.selectItem();\r\n                    if (!item.isFolder ||\r\n                        _this.environment.canInvokePrimaryActionOnItemContainer) {\r\n                        actions.primaryAction();\r\n                    }\r\n                }\r\n            },\r\n            onFocus: function () {\r\n                actions.focusItem();\r\n            },\r\n            onDragStart: function (e) {\r\n                e.dataTransfer.dropEffect = 'move';\r\n                actions.startDragging();\r\n            },\r\n            onDragOver: function (e) {\r\n                e.preventDefault(); // Allow drop\r\n            },\r\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\r\n            tabIndex: !renderFlags.isRenaming\r\n                ? renderFlags.isFocused\r\n                    ? 0\r\n                    : -1\r\n                : undefined,\r\n        };\r\n    };\r\n    return ClickItemToExpandInteractionManager;\r\n}());\r\nexports.ClickItemToExpandInteractionManager = ClickItemToExpandInteractionManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DoubleClickItemToExpandInteractionManager = void 0;\r\nvar types_1 = require(\"../types\");\r\nvar isControlKey_1 = require(\"../isControlKey\");\r\nvar DoubleClickItemToExpandInteractionManager = /** @class */ (function () {\r\n    function DoubleClickItemToExpandInteractionManager(environment) {\r\n        this.mode = types_1.InteractionMode.DoubleClickItemToExpand;\r\n        this.environment = environment;\r\n    }\r\n    DoubleClickItemToExpandInteractionManager.prototype.createInteractiveElementProps = function (item, treeId, actions, renderFlags) {\r\n        var _this = this;\r\n        return {\r\n            onClick: function (e) {\r\n                actions.focusItem();\r\n                if (e.shiftKey) {\r\n                    actions.selectUpTo(!(0, isControlKey_1.isControlKey)(e));\r\n                }\r\n                else if ((0, isControlKey_1.isControlKey)(e)) {\r\n                    if (renderFlags.isSelected) {\r\n                        actions.unselectItem();\r\n                    }\r\n                    else {\r\n                        actions.addToSelectedItems();\r\n                    }\r\n                }\r\n                else {\r\n                    actions.selectItem();\r\n                }\r\n            },\r\n            onDoubleClick: function () {\r\n                actions.focusItem();\r\n                actions.selectItem();\r\n                if (item.isFolder) {\r\n                    actions.toggleExpandedState();\r\n                }\r\n                if (!item.isFolder ||\r\n                    _this.environment.canInvokePrimaryActionOnItemContainer) {\r\n                    actions.primaryAction();\r\n                }\r\n            },\r\n            onFocus: function () {\r\n                actions.focusItem();\r\n            },\r\n            onDragStart: function (e) {\r\n                e.dataTransfer.dropEffect = 'move';\r\n                actions.startDragging();\r\n            },\r\n            onDragOver: function (e) {\r\n                e.preventDefault(); // Allow drop\r\n            },\r\n            draggable: renderFlags.canDrag && !renderFlags.isRenaming,\r\n            tabIndex: !renderFlags.isRenaming\r\n                ? renderFlags.isFocused\r\n                    ? 0\r\n                    : -1\r\n                : undefined,\r\n        };\r\n    };\r\n    return DoubleClickItemToExpandInteractionManager;\r\n}());\r\nexports.DoubleClickItemToExpandInteractionManager = DoubleClickItemToExpandInteractionManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isControlKey = void 0;\r\nvar isControlKey = function (e) {\r\n    return e.ctrlKey ||\r\n        (navigator.platform.toUpperCase().indexOf('MAC') >= 0 && e.metaKey);\r\n};\r\nexports.isControlKey = isControlKey;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createDefaultRenderers = void 0;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar cx = function () {\r\n    var classNames = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        classNames[_i] = arguments[_i];\r\n    }\r\n    return classNames.filter(function (cn) { return !!cn; }).join(' ');\r\n};\r\nvar createDefaultRenderers = function (renderDepthOffset) { return ({\r\n    renderItemTitle: function (_a) {\r\n        var title = _a.title, context = _a.context, info = _a.info;\r\n        if (!info.isSearching || !context.isSearchMatching) {\r\n            return title;\r\n        }\r\n        var startIndex = title.toLowerCase().indexOf(info.search.toLowerCase());\r\n        return (react_1.default.createElement(react_1.default.Fragment, null,\r\n            startIndex > 0 && react_1.default.createElement(\"span\", null, title.slice(0, startIndex)),\r\n            react_1.default.createElement(\"span\", { className: \"rct-tree-item-search-highlight\" }, title.slice(startIndex, startIndex + info.search.length)),\r\n            startIndex + info.search.length < title.length && (react_1.default.createElement(\"span\", null, title.slice(startIndex + info.search.length, title.length)))));\r\n    },\r\n    renderItemArrow: function (_a) {\r\n        var item = _a.item, context = _a.context;\r\n        return (\r\n        // Icons from https://blueprintjs.com/docs/#icons\r\n        react_1.default.createElement(\"div\", __assign({ className: cx(item.isFolder && 'rct-tree-item-arrow-isFolder', 'rct-tree-item-arrow') }, context.arrowProps), item.isFolder &&\r\n            (context.isExpanded ? (react_1.default.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 16 16\", enableBackground: \"new 0 0 16 16\", xmlSpace: \"preserve\" },\r\n                react_1.default.createElement(\"g\", null,\r\n                    react_1.default.createElement(\"g\", null,\r\n                        react_1.default.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\", className: \"rct-tree-item-arrow-path\" }))))) : (react_1.default.createElement(\"svg\", { version: \"1.1\", xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", x: \"0px\", y: \"0px\", viewBox: \"0 0 16 16\", enableBackground: \"new 0 0 16 16\", xmlSpace: \"preserve\" },\r\n                react_1.default.createElement(\"g\", null,\r\n                    react_1.default.createElement(\"g\", null,\r\n                        react_1.default.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\", className: \"rct-tree-item-arrow-path\" }))))))));\r\n    },\r\n    renderItem: function (_a) {\r\n        var item = _a.item, depth = _a.depth, children = _a.children, title = _a.title, context = _a.context, arrow = _a.arrow;\r\n        var InteractiveComponent = context.isRenaming ? 'div' : 'button';\r\n        var type = context.isRenaming ? undefined : 'button';\r\n        // TODO have only root li component create all the classes\r\n        return (react_1.default.createElement(\"li\", __assign({}, context.itemContainerWithChildrenProps, { className: cx('rct-tree-item-li', item.isFolder && 'rct-tree-item-li-isFolder', context.isSelected && 'rct-tree-item-li-selected', context.isExpanded && 'rct-tree-item-li-expanded', context.isFocused && 'rct-tree-item-li-focused', context.isDraggingOver && 'rct-tree-item-li-dragging-over', context.isSearchMatching && 'rct-tree-item-li-search-match') }),\r\n            react_1.default.createElement(\"div\", __assign({}, context.itemContainerWithoutChildrenProps, { style: { paddingLeft: \"\".concat((depth + 1) * renderDepthOffset, \"px\") }, className: cx('rct-tree-item-title-container', item.isFolder && 'rct-tree-item-title-container-isFolder', context.isSelected && 'rct-tree-item-title-container-selected', context.isExpanded && 'rct-tree-item-title-container-expanded', context.isFocused && 'rct-tree-item-title-container-focused', context.isDraggingOver &&\r\n                    'rct-tree-item-title-container-dragging-over', context.isSearchMatching &&\r\n                    'rct-tree-item-title-container-search-match') }),\r\n                arrow,\r\n                react_1.default.createElement(InteractiveComponent, __assign({ type: type }, context.interactiveElementProps, { className: cx('rct-tree-item-button', item.isFolder && 'rct-tree-item-button-isFolder', context.isSelected && 'rct-tree-item-button-selected', context.isExpanded && 'rct-tree-item-button-expanded', context.isFocused && 'rct-tree-item-button-focused', context.isDraggingOver && 'rct-tree-item-button-dragging-over', context.isSearchMatching && 'rct-tree-item-button-search-match') }), title)),\r\n            children));\r\n    },\r\n    renderRenameInput: function (_a) {\r\n        var inputProps = _a.inputProps, inputRef = _a.inputRef, submitButtonProps = _a.submitButtonProps, submitButtonRef = _a.submitButtonRef, formProps = _a.formProps;\r\n        return (react_1.default.createElement(\"form\", __assign({}, formProps, { className: \"rct-tree-item-renaming-form\" }),\r\n            react_1.default.createElement(\"input\", __assign({}, inputProps, { ref: inputRef, className: \"rct-tree-item-renaming-input\" })),\r\n            react_1.default.createElement(\"input\", __assign({}, submitButtonProps, { ref: submitButtonRef, type: \"submit\", className: \"rct-tree-item-renaming-submit-button\", value: \"\\uD83D\\uDDF8\" }))));\r\n    },\r\n    renderTreeContainer: function (_a) {\r\n        var children = _a.children, containerProps = _a.containerProps, info = _a.info;\r\n        return (react_1.default.createElement(\"div\", { className: cx('rct-tree-root', info.isFocused && 'rct-tree-root-focus', info.isRenaming && 'rct-tree-root-renaming', info.areItemsSelected && 'rct-tree-root-itemsselected') },\r\n            react_1.default.createElement(\"div\", __assign({}, containerProps, { style: __assign({ minHeight: '30px' }, containerProps.style) }), children)));\r\n    },\r\n    renderItemsContainer: function (_a) {\r\n        var children = _a.children, containerProps = _a.containerProps;\r\n        return (react_1.default.createElement(\"ul\", __assign({}, containerProps, { className: \"rct-tree-items-container\" }), children));\r\n    },\r\n    renderDragBetweenLine: function (_a) {\r\n        var draggingPosition = _a.draggingPosition, lineProps = _a.lineProps;\r\n        return (react_1.default.createElement(\"div\", __assign({}, lineProps, { style: { left: \"\".concat(draggingPosition.depth * renderDepthOffset, \"px\") }, className: cx('rct-tree-drag-between-line', draggingPosition.targetType === 'between-items' &&\r\n                draggingPosition.linePosition === 'top' &&\r\n                'rct-tree-drag-between-line-top', draggingPosition.targetType === 'between-items' &&\r\n                draggingPosition.linePosition === 'bottom' &&\r\n                'rct-tree-drag-between-line-bottom') })));\r\n    },\r\n    renderSearchInput: function (_a) {\r\n        var inputProps = _a.inputProps;\r\n        return (react_1.default.createElement(\"div\", { className: cx('rct-tree-search-input-container') },\r\n            react_1.default.createElement(\"span\", { className: \"rct-tree-input-icon\" }),\r\n            react_1.default.createElement(\"input\", __assign({}, inputProps, { className: cx('rct-tree-search-input') }))));\r\n    },\r\n    renderLiveDescriptorContainer: function (_a) {\r\n        var tree = _a.tree, children = _a.children;\r\n        return (react_1.default.createElement(\"div\", { id: \"rct-livedescription-\".concat(tree.treeId), style: {\r\n                clip: 'rect(0 0 0 0)',\r\n                clipPath: 'inset(50%)',\r\n                height: '1px',\r\n                overflow: 'hidden',\r\n                position: 'absolute',\r\n                whiteSpace: 'nowrap',\r\n                width: '1px',\r\n            } }, children));\r\n    },\r\n    renderDepthOffset: renderDepthOffset,\r\n}); };\r\nexports.createDefaultRenderers = createDefaultRenderers;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./createDefaultRenderers\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useRenderers = void 0;\r\nvar react_1 = require(\"react\");\r\nvar createDefaultRenderers_1 = require(\"./createDefaultRenderers\");\r\nvar useRenderers = function (_a) {\r\n    var renderItem = _a.renderItem, renderItemTitle = _a.renderItemTitle, renderItemArrow = _a.renderItemArrow, renderRenameInput = _a.renderRenameInput, renderItemsContainer = _a.renderItemsContainer, renderTreeContainer = _a.renderTreeContainer, renderDragBetweenLine = _a.renderDragBetweenLine, renderSearchInput = _a.renderSearchInput, renderLiveDescriptorContainer = _a.renderLiveDescriptorContainer, renderDepthOffset = _a.renderDepthOffset;\r\n    var defaultRenderers = (0, react_1.useMemo)(function () { return (0, createDefaultRenderers_1.createDefaultRenderers)(renderDepthOffset !== null && renderDepthOffset !== void 0 ? renderDepthOffset : 10); }, [renderDepthOffset]);\r\n    var customRenderers = {\r\n        renderItem: renderItem,\r\n        renderItemTitle: renderItemTitle,\r\n        renderItemArrow: renderItemArrow,\r\n        renderRenameInput: renderRenameInput,\r\n        renderItemsContainer: renderItemsContainer,\r\n        renderTreeContainer: renderTreeContainer,\r\n        renderDragBetweenLine: renderDragBetweenLine,\r\n        renderSearchInput: renderSearchInput,\r\n        renderLiveDescriptorContainer: renderLiveDescriptorContainer,\r\n        renderDepthOffset: renderDepthOffset,\r\n    };\r\n    var renderers = Object.entries(defaultRenderers).reduce(function (acc, _a) {\r\n        var key = _a[0], value = _a[1];\r\n        var keyMapped = key;\r\n        if (customRenderers[keyMapped]) {\r\n            acc[keyMapped] = customRenderers[keyMapped];\r\n        }\r\n        else {\r\n            acc[keyMapped] = value;\r\n        }\r\n        return acc;\r\n    }, {});\r\n    renderers.renderItem.displayName = 'RenderItem';\r\n    renderers.renderItemTitle.displayName = 'RenderItemTitle';\r\n    renderers.renderItemArrow.displayName = 'RenderItemArrow';\r\n    renderers.renderRenameInput.displayName = 'RenderRenameInput';\r\n    renderers.renderItemsContainer.displayName = 'RenderItemsContainer';\r\n    renderers.renderTreeContainer.displayName = 'RenderTreeContainer';\r\n    renderers.renderDragBetweenLine.displayName =\r\n        'RenderDragBetweenLine';\r\n    renderers.renderSearchInput.displayName = 'RenderSearchInput';\r\n    return renderers;\r\n};\r\nexports.useRenderers = useRenderers;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SearchInput = void 0;\r\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\r\nvar useHotkey_1 = require(\"../hotkeys/useHotkey\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useSearchMatchFocus_1 = require(\"./useSearchMatchFocus\");\r\nvar useViewState_1 = require(\"../tree/useViewState\");\r\nvar useCallSoon_1 = require(\"../useCallSoon\");\r\nvar utils_1 = require(\"../utils\");\r\nvar SearchInput = function (_a) {\r\n    var _b;\r\n    var containerRef = _a.containerRef;\r\n    var _c = (0, Tree_1.useTree)(), search = _c.search, setSearch = _c.setSearch, treeId = _c.treeId, renderers = _c.renderers, renamingItem = _c.renamingItem;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    (0, useViewState_1.useViewState)();\r\n    var isActiveTree = environment.activeTreeId === treeId;\r\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\r\n    (0, useSearchMatchFocus_1.useSearchMatchFocus)();\r\n    var clearSearch = function () {\r\n        var _a, _b, _c;\r\n        setSearch(null);\r\n        if ((_a = environment.autoFocus) !== null && _a !== void 0 ? _a : true) {\r\n            // Refocus item in tree\r\n            // TODO move logic as reusable method into tree or tree environment\r\n            var focusItem = (_b = (0, utils_1.getDocument)()) === null || _b === void 0 ? void 0 : _b.querySelector(\"[data-rct-tree=\\\"\".concat(treeId, \"\\\"] [data-rct-item-focus=\\\"true\\\"]\"));\r\n            (_c = focusItem === null || focusItem === void 0 ? void 0 : focusItem.focus) === null || _c === void 0 ? void 0 : _c.call(focusItem);\r\n        }\r\n    };\r\n    (0, useHotkey_1.useHotkey)('abortSearch', function () {\r\n        // Without the callSoon, hitting enter to abort\r\n        // and then moving focus weirdly moves the selected item along\r\n        // with the focused item.\r\n        callSoon(function () {\r\n            clearSearch();\r\n        });\r\n    }, isActiveTree && search !== null, true);\r\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)(containerRef, 'keydown', function (e) {\r\n        var _a, _b;\r\n        var unicode = e.key.charCodeAt(0);\r\n        if (((_a = environment.canSearch) !== null && _a !== void 0 ? _a : true) &&\r\n            ((_b = environment.canSearchByStartingTyping) !== null && _b !== void 0 ? _b : true) &&\r\n            isActiveTree &&\r\n            search === null &&\r\n            !renamingItem &&\r\n            !e.ctrlKey &&\r\n            !e.shiftKey &&\r\n            !e.altKey &&\r\n            !e.metaKey &&\r\n            ((unicode >= 48 && unicode <= 57) || // number\r\n                // (unicode >= 65 && unicode <= 90) || // uppercase letter\r\n                (unicode >= 97 && unicode <= 122)) // lowercase letter\r\n        ) {\r\n            setSearch('');\r\n        }\r\n    });\r\n    if (!((_b = environment.canSearch) !== null && _b !== void 0 ? _b : true) || search === null) {\r\n        return null;\r\n    }\r\n    return renderers.renderSearchInput({\r\n        inputProps: __assign({ value: search, onChange: function (e) { return setSearch(e.target.value); }, onBlur: function () {\r\n                clearSearch();\r\n            }, ref: function (el) {\r\n                var _a;\r\n                (_a = el === null || el === void 0 ? void 0 : el.focus) === null || _a === void 0 ? void 0 : _a.call(el);\r\n            }, 'aria-label': 'Search for items' }, {\r\n            'data-rct-search-input': 'true',\r\n        }),\r\n    });\r\n};\r\nexports.SearchInput = SearchInput;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.defaultMatcher = void 0;\r\nvar defaultMatcher = function (search, item, itemTitle) {\r\n    return itemTitle.toLowerCase().includes(search.toLowerCase());\r\n};\r\nexports.defaultMatcher = defaultMatcher;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useSearchMatchFocus = void 0;\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar defaultMatcher_1 = require(\"./defaultMatcher\");\r\nvar useSideEffect_1 = require(\"../useSideEffect\");\r\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\r\nvar useCallSoon_1 = require(\"../useCallSoon\");\r\nvar useSearchMatchFocus = function () {\r\n    var _a = (0, ControlledTreeEnvironment_1.useTreeEnvironment)(), doesSearchMatchItem = _a.doesSearchMatchItem, items = _a.items, getItemTitle = _a.getItemTitle, onFocusItem = _a.onFocusItem;\r\n    var _b = (0, Tree_1.useTree)(), search = _b.search, treeId = _b.treeId;\r\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\r\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\r\n    (0, useSideEffect_1.useSideEffect)(function () {\r\n        if (search && search.length > 0) {\r\n            callSoon(function () {\r\n                var focusItem = linearItems.find(function (_a) {\r\n                    var item = _a.item;\r\n                    return (doesSearchMatchItem !== null && doesSearchMatchItem !== void 0 ? doesSearchMatchItem : defaultMatcher_1.defaultMatcher)(search, items[item], getItemTitle(items[item]));\r\n                });\r\n                if (focusItem) {\r\n                    onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(items[focusItem.item], treeId);\r\n                }\r\n            });\r\n        }\r\n    }, [\r\n        doesSearchMatchItem,\r\n        getItemTitle,\r\n        linearItems,\r\n        items,\r\n        onFocusItem,\r\n        search,\r\n        treeId,\r\n        callSoon,\r\n    ], [search]);\r\n};\r\nexports.useSearchMatchFocus = useSearchMatchFocus;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TreeActionsProvider = exports.useTreeActions = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useCreatedTreeRef_1 = require(\"./useCreatedTreeRef\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar EnvironmentActionsProvider_1 = require(\"../environmentActions/EnvironmentActionsProvider\");\r\nvar EnvironmentActionsContext = React.createContext(null);\r\nvar useTreeActions = function () { return React.useContext(EnvironmentActionsContext); };\r\nexports.useTreeActions = useTreeActions;\r\nexports.TreeActionsProvider = React.forwardRef(function (props, ref) {\r\n    (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var tree = (0, Tree_1.useTree)();\r\n    (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    var envActions = (0, EnvironmentActionsProvider_1.useEnvironmentActions)();\r\n    // TODO change tree childs to use actions rather than output events where possible\r\n    // TODO maybe replace with stable handlers\r\n    var actions = (0, react_1.useMemo)(function () { return ({\r\n        abortRenamingItem: function () {\r\n            tree.setRenamingItem(null);\r\n        },\r\n        abortSearch: function () {\r\n            tree.setSearch(null);\r\n        },\r\n        collapseItem: function (itemId) {\r\n            envActions.collapseItem(itemId, tree.treeId);\r\n        },\r\n        completeRenamingItem: function () {\r\n            // TODO\r\n        },\r\n        expandItem: function (itemId) {\r\n            envActions.expandItem(itemId, tree.treeId);\r\n        },\r\n        focusItem: function (itemId, setDomFocus) {\r\n            if (setDomFocus === void 0) { setDomFocus = true; }\r\n            envActions.focusItem(itemId, tree.treeId, setDomFocus);\r\n        },\r\n        focusTree: function (autoFocus) {\r\n            if (autoFocus === void 0) { autoFocus = true; }\r\n            envActions.focusTree(tree.treeId, autoFocus);\r\n        },\r\n        invokePrimaryAction: function (itemId) {\r\n            envActions.invokePrimaryAction(itemId, tree.treeId);\r\n        },\r\n        moveFocusDown: function () {\r\n            envActions.moveFocusDown(tree.treeId);\r\n        },\r\n        moveFocusUp: function () {\r\n            envActions.moveFocusUp(tree.treeId);\r\n        },\r\n        renameItem: function (itemId, name) {\r\n            envActions.renameItem(itemId, name, tree.treeId);\r\n        },\r\n        selectItems: function (itemsIds) {\r\n            envActions.selectItems(itemsIds, tree.treeId);\r\n        },\r\n        setSearch: function (search) {\r\n            tree.setSearch(search);\r\n        },\r\n        startRenamingItem: function (itemId) {\r\n            tree.setRenamingItem(itemId);\r\n        },\r\n        stopRenamingItem: function () {\r\n            tree.setRenamingItem(null);\r\n        },\r\n        toggleItemExpandedState: function (itemId) {\r\n            envActions.toggleItemExpandedState(itemId, tree.treeId);\r\n        },\r\n        toggleItemSelectStatus: function (itemId) {\r\n            envActions.toggleItemSelectStatus(itemId, tree.treeId);\r\n        },\r\n        expandAll: function () {\r\n            envActions.expandAll(tree.treeId);\r\n        },\r\n        collapseAll: function () {\r\n            envActions.collapseAll(tree.treeId);\r\n        },\r\n        expandSubsequently: function (itemIds) {\r\n            return envActions.expandSubsequently(tree.treeId, itemIds);\r\n        },\r\n    }); }, [envActions, tree]);\r\n    (0, useCreatedTreeRef_1.useCreatedTreeRef)(ref, actions);\r\n    return (React.createElement(EnvironmentActionsContext.Provider, { value: actions }, props.children));\r\n});\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useCreatedTreeRef = void 0;\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar useCreatedTreeRef = function (ref, actions) {\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var tree = (0, Tree_1.useTree)();\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    (0, react_1.useImperativeHandle)(ref, function () { return (__assign(__assign(__assign({}, actions), { treeEnvironmentContext: environment, dragAndDropContext: dnd, treeContext: tree }), tree.treeInformation)); });\r\n};\r\nexports.useCreatedTreeRef = useCreatedTreeRef;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TreeItemChildren = void 0;\r\nvar react_1 = __importDefault(require(\"react\"));\r\nvar TreeItemElement_1 = require(\"./TreeItemElement\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar TreeItemChildren = function (props) {\r\n    var _a = (0, Tree_1.useTree)(), renderers = _a.renderers, treeInformation = _a.treeInformation;\r\n    var childElements = [];\r\n    for (var _i = 0, _b = props.children; _i < _b.length; _i++) {\r\n        var child = _b[_i];\r\n        childElements.push(react_1.default.createElement(TreeItemElement_1.TreeItemElement, { key: child, itemIndex: child, depth: props.depth }));\r\n    }\r\n    if (childElements.length === 0) {\r\n        return null;\r\n    }\r\n    var containerProps = {\r\n        role: props.depth !== 0 ? 'group' : undefined,\r\n    };\r\n    return renderers.renderItemsContainer({\r\n        children: childElements,\r\n        info: treeInformation,\r\n        containerProps: containerProps,\r\n        depth: props.depth,\r\n        parentId: props.parentId,\r\n    });\r\n};\r\nexports.TreeItemChildren = TreeItemChildren;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TreeItemElement = void 0;\r\nvar react_1 = __importStar(require(\"react\"));\r\nvar TreeItemChildren_1 = require(\"./TreeItemChildren\");\r\nvar useViewState_1 = require(\"../tree/useViewState\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useTreeItemRenderContext_1 = require(\"./useTreeItemRenderContext\");\r\nvar TreeItemRenamingInput_1 = require(\"./TreeItemRenamingInput\");\r\nvar TreeItemElement = function (props) {\r\n    var _a, _b, _c, _d;\r\n    var _e = (0, react_1.useState)(false), hasBeenRequested = _e[0], setHasBeenRequested = _e[1];\r\n    var _f = (0, Tree_1.useTree)(), renderers = _f.renderers, treeInformation = _f.treeInformation, renamingItem = _f.renamingItem;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var viewState = (0, useViewState_1.useViewState)();\r\n    var item = environment.items[props.itemIndex];\r\n    var isExpanded = (0, react_1.useMemo)(function () { var _a; return (_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(props.itemIndex); }, [props.itemIndex, viewState.expandedItems]);\r\n    var renderContext = (0, useTreeItemRenderContext_1.useTreeItemRenderContext)(item);\r\n    if (item === undefined || renderContext === undefined) {\r\n        if (!hasBeenRequested) {\r\n            setHasBeenRequested(true);\r\n            (_a = environment.onMissingItems) === null || _a === void 0 ? void 0 : _a.call(environment, [props.itemIndex]);\r\n        }\r\n        return null;\r\n    }\r\n    var shouldRenderChildren = (_c = (_b = environment.shouldRenderChildren) === null || _b === void 0 ? void 0 : _b.call(environment, item, renderContext)) !== null && _c !== void 0 ? _c : (item.isFolder && isExpanded);\r\n    var children = item.children && shouldRenderChildren && (react_1.default.createElement(TreeItemChildren_1.TreeItemChildren, { depth: props.depth + 1, parentId: props.itemIndex }, item.children));\r\n    var title = environment.getItemTitle(item);\r\n    var titleComponent = renamingItem === props.itemIndex ? (react_1.default.createElement(TreeItemRenamingInput_1.TreeItemRenamingInput, { itemIndex: props.itemIndex })) : (renderers.renderItemTitle({\r\n        info: treeInformation,\r\n        context: renderContext,\r\n        title: title,\r\n        item: item,\r\n    }));\r\n    var arrowComponent = renderers.renderItemArrow({\r\n        info: treeInformation,\r\n        context: renderContext,\r\n        item: environment.items[props.itemIndex],\r\n    });\r\n    return ((_d = renderers.renderItem({\r\n        item: environment.items[props.itemIndex],\r\n        depth: props.depth,\r\n        title: titleComponent,\r\n        arrow: arrowComponent,\r\n        context: renderContext,\r\n        info: treeInformation,\r\n        children: children,\r\n    })) !== null && _d !== void 0 ? _d : null); // Type to use AllTreeRenderProps\r\n};\r\nexports.TreeItemElement = TreeItemElement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TreeItemRenamingInput = void 0;\r\nvar react_1 = require(\"react\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useHotkey_1 = require(\"../hotkeys/useHotkey\");\r\nvar useSideEffect_1 = require(\"../useSideEffect\");\r\nvar useCallSoon_1 = require(\"../useCallSoon\");\r\nvar TreeItemRenamingInput = function (props) {\r\n    var _a = (0, Tree_1.useTree)(), renderers = _a.renderers, treeInformation = _a.treeInformation, setRenamingItem = _a.setRenamingItem, treeId = _a.treeId;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var inputRef = (0, react_1.useRef)(null);\r\n    var submitButtonRef = (0, react_1.useRef)(null);\r\n    var item = environment.items[props.itemIndex];\r\n    var _b = (0, react_1.useState)(environment.getItemTitle(item)), title = _b[0], setTitle = _b[1];\r\n    var callSoon = (0, useCallSoon_1.useCallSoon)(true);\r\n    var abort = function () {\r\n        var _a;\r\n        (_a = environment.onAbortRenamingItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeInformation.treeId);\r\n        setRenamingItem(null);\r\n        callSoon(function () {\r\n            environment.setActiveTree(treeId);\r\n        });\r\n    };\r\n    var confirm = function () {\r\n        var _a;\r\n        (_a = environment.onRenameItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, title, treeInformation.treeId);\r\n        setRenamingItem(null);\r\n        callSoon(function () {\r\n            environment.setActiveTree(treeId);\r\n        });\r\n    };\r\n    (0, useSideEffect_1.useSideEffect)(function () {\r\n        var _a, _b, _c, _d;\r\n        environment.setActiveTree(treeId);\r\n        if ((_a = environment.autoFocus) !== null && _a !== void 0 ? _a : true) {\r\n            (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.select();\r\n            (_d = (_c = inputRef.current) === null || _c === void 0 ? void 0 : _c.focus) === null || _d === void 0 ? void 0 : _d.call(_c);\r\n        }\r\n    }, [environment, treeId], []);\r\n    (0, useHotkey_1.useHotkey)('abortRenameItem', function () {\r\n        abort();\r\n    }, true, true);\r\n    var inputProps = {\r\n        value: title,\r\n        onChange: function (e) {\r\n            setTitle(e.target.value);\r\n        },\r\n        onBlur: function (e) {\r\n            if (e.relatedTarget !== submitButtonRef.current) {\r\n                abort();\r\n            }\r\n        },\r\n        'aria-label': 'New item name',\r\n        tabIndex: 0,\r\n    };\r\n    var submitButtonProps = {\r\n        onClick: function (e) {\r\n            e.stopPropagation();\r\n            confirm();\r\n        },\r\n    };\r\n    var formProps = {\r\n        onSubmit: function (e) {\r\n            e.preventDefault();\r\n            confirm();\r\n        },\r\n    };\r\n    return renderers.renderRenameInput({\r\n        item: item,\r\n        inputRef: inputRef,\r\n        submitButtonProps: submitButtonProps,\r\n        submitButtonRef: submitButtonRef,\r\n        formProps: formProps,\r\n        inputProps: inputProps,\r\n    });\r\n};\r\nexports.TreeItemRenamingInput = TreeItemRenamingInput;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useTreeItemRenderContext = void 0;\r\nvar react_1 = require(\"react\");\r\nvar defaultMatcher_1 = require(\"../search/defaultMatcher\");\r\nvar Tree_1 = require(\"../tree/Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar InteractionManagerProvider_1 = require(\"../controlledEnvironment/InteractionManagerProvider\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar useSelectUpTo_1 = require(\"../tree/useSelectUpTo\");\r\nvar useGetOriginalItemOrder_1 = require(\"../useGetOriginalItemOrder\");\r\n// TODO restructure file. Everything into one hook file without helper methods, let all props be generated outside (InteractionManager and AccessibilityPropsManager), ...\r\nvar useTreeItemRenderContext = function (item) {\r\n    var _a, _b, _c, _d;\r\n    var _e = (0, Tree_1.useTree)(), treeId = _e.treeId, search = _e.search, renamingItem = _e.renamingItem, setRenamingItem = _e.setRenamingItem;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var interactionManager = (0, InteractionManagerProvider_1.useInteractionManager)();\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    var selectUpTo = (0, useSelectUpTo_1.useSelectUpTo)('last-focus');\r\n    var itemTitle = item && environment.getItemTitle(item);\r\n    var getOriginalItemOrder = (0, useGetOriginalItemOrder_1.useGetOriginalItemOrder)();\r\n    var isSearchMatching = (0, react_1.useMemo)(function () {\r\n        var _a;\r\n        return search === null || search.length === 0 || !item || !itemTitle\r\n            ? false\r\n            : ((_a = environment.doesSearchMatchItem) !== null && _a !== void 0 ? _a : defaultMatcher_1.defaultMatcher)(search, item, itemTitle);\r\n    }, [search, item, itemTitle, environment.doesSearchMatchItem]);\r\n    var isSelected = item && ((_b = (_a = environment.viewState[treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems) === null || _b === void 0 ? void 0 : _b.includes(item.index));\r\n    var isExpanded = item && ((_d = (_c = environment.viewState[treeId]) === null || _c === void 0 ? void 0 : _c.expandedItems) === null || _d === void 0 ? void 0 : _d.includes(item.index));\r\n    var isRenaming = item && renamingItem === item.index;\r\n    return (0, react_1.useMemo)(function () {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        var viewState = environment.viewState[treeId];\r\n        var currentlySelectedItems = ((_b = (_a = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) === null || _a === void 0 ? void 0 : _a.map(function (item) { return environment.items[item]; })) !== null && _b !== void 0 ? _b : ((viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem)\r\n            ? [environment.items[viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem]]\r\n            : [])).filter(function (item) { return !!item; });\r\n        var isItemPartOfSelectedItems = !!currentlySelectedItems.find(function (selectedItem) { return selectedItem.index === item.index; });\r\n        var canDragCurrentlySelectedItems = currentlySelectedItems &&\r\n            ((_d = (_c = environment.canDrag) === null || _c === void 0 ? void 0 : _c.call(environment, currentlySelectedItems)) !== null && _d !== void 0 ? _d : true) &&\r\n            currentlySelectedItems\r\n                .map(function (item) { var _a; return (_a = item.canMove) !== null && _a !== void 0 ? _a : true; })\r\n                .reduce(function (a, b) { return a && b; }, true);\r\n        var canDragThisItem = ((_f = (_e = environment.canDrag) === null || _e === void 0 ? void 0 : _e.call(environment, [item])) !== null && _f !== void 0 ? _f : true) && ((_g = item.canMove) !== null && _g !== void 0 ? _g : true);\r\n        var canDrag = environment.canDragAndDrop &&\r\n            ((isItemPartOfSelectedItems && canDragCurrentlySelectedItems) ||\r\n                (!isItemPartOfSelectedItems && canDragThisItem));\r\n        var canDropOn = environment.canDragAndDrop &&\r\n            !!((_j = (_h = dnd.viableDragPositions) === null || _h === void 0 ? void 0 : _h[treeId]) === null || _j === void 0 ? void 0 : _j.find(function (position) {\r\n                return position.targetType === 'item' && position.targetItem === item.index;\r\n            }));\r\n        var actions = {\r\n            // TODO disable most actions during rename\r\n            primaryAction: function () {\r\n                var _a;\r\n                (_a = environment.onPrimaryAction) === null || _a === void 0 ? void 0 : _a.call(environment, environment.items[item.index], treeId);\r\n            },\r\n            collapseItem: function () {\r\n                var _a;\r\n                (_a = environment.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\r\n            },\r\n            expandItem: function () {\r\n                var _a;\r\n                (_a = environment.onExpandItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\r\n            },\r\n            toggleExpandedState: function () {\r\n                var _a, _b;\r\n                if (isExpanded) {\r\n                    (_a = environment.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\r\n                }\r\n                else {\r\n                    (_b = environment.onExpandItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\r\n                }\r\n            },\r\n            selectItem: function () {\r\n                var _a;\r\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, [item.index], treeId);\r\n            },\r\n            addToSelectedItems: function () {\r\n                var _a, _b;\r\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, __spreadArray(__spreadArray([], ((_b = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) !== null && _b !== void 0 ? _b : []), true), [item.index], false), treeId);\r\n            },\r\n            unselectItem: function () {\r\n                var _a, _b, _c;\r\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, (_c = (_b = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) === null || _b === void 0 ? void 0 : _b.filter(function (id) { return id !== item.index; })) !== null && _c !== void 0 ? _c : [], treeId);\r\n            },\r\n            selectUpTo: function (overrideOldSelection) {\r\n                selectUpTo(item, overrideOldSelection);\r\n            },\r\n            startRenamingItem: function () {\r\n                setRenamingItem(item.index);\r\n            },\r\n            stopRenamingItem: function () {\r\n                setRenamingItem(null);\r\n            },\r\n            focusItem: function (setDomFocus) {\r\n                var _a;\r\n                if (setDomFocus === void 0) { setDomFocus = true; }\r\n                (_a = environment.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId, setDomFocus);\r\n            },\r\n            startDragging: function () {\r\n                var _a, _b;\r\n                var selectedItems = (_a = viewState === null || viewState === void 0 ? void 0 : viewState.selectedItems) !== null && _a !== void 0 ? _a : [];\r\n                if (!selectedItems.includes(item.index)) {\r\n                    selectedItems = [item.index];\r\n                    (_b = environment.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(environment, selectedItems, treeId);\r\n                }\r\n                if (canDrag) {\r\n                    var orderedItems = getOriginalItemOrder(treeId, selectedItems.map(function (id) { return environment.items[id]; }));\r\n                    dnd.onStartDraggingItems(orderedItems, treeId);\r\n                }\r\n            },\r\n        };\r\n        var renderFlags = {\r\n            isSelected: isSelected,\r\n            isExpanded: isExpanded,\r\n            isFocused: (viewState === null || viewState === void 0 ? void 0 : viewState.focusedItem) === item.index,\r\n            isRenaming: isRenaming,\r\n            isDraggingOver: dnd.draggingPosition &&\r\n                dnd.draggingPosition.targetType === 'item' &&\r\n                dnd.draggingPosition.targetItem === item.index &&\r\n                dnd.draggingPosition.treeId === treeId,\r\n            isDraggingOverParent: false,\r\n            isSearchMatching: isSearchMatching,\r\n            canDrag: canDrag,\r\n            canDropOn: canDropOn,\r\n        };\r\n        var interactiveElementProps = __assign(__assign({}, interactionManager.createInteractiveElementProps(item, treeId, actions, renderFlags, viewState)), {\r\n            'data-rct-item-interactive': true,\r\n            'data-rct-item-focus': renderFlags.isFocused ? 'true' : 'false',\r\n            'data-rct-item-id': item.index,\r\n        });\r\n        var itemContainerWithoutChildrenProps = __assign({}, {\r\n            'data-rct-item-container': 'true',\r\n        });\r\n        var itemContainerWithChildrenProps = {\r\n            role: 'treeitem',\r\n            'aria-selected': renderFlags.isSelected,\r\n            'aria-expanded': item.isFolder\r\n                ? renderFlags.isExpanded\r\n                    ? 'true'\r\n                    : 'false'\r\n                : undefined,\r\n        };\r\n        var arrowProps = {\r\n            onClick: function () {\r\n                if (item.isFolder) {\r\n                    actions.toggleExpandedState();\r\n                }\r\n                actions.selectItem();\r\n            },\r\n            onFocus: function () {\r\n                actions.focusItem();\r\n            },\r\n            onDragOver: function (e) {\r\n                e.preventDefault(); // Allow drop\r\n            },\r\n            'aria-hidden': true,\r\n            tabIndex: -1,\r\n        };\r\n        var viewStateFlags = !viewState\r\n            ? {}\r\n            : Object.entries(viewState).reduce(function (acc, _a) {\r\n                var key = _a[0], value = _a[1];\r\n                acc[key] = Array.isArray(value)\r\n                    ? value.includes(item.index)\r\n                    : value === item.index;\r\n                return acc;\r\n            }, {});\r\n        return __assign(__assign(__assign({}, actions), renderFlags), { interactiveElementProps: interactiveElementProps, itemContainerWithChildrenProps: itemContainerWithChildrenProps, itemContainerWithoutChildrenProps: itemContainerWithoutChildrenProps, arrowProps: arrowProps, viewStateFlags: viewStateFlags });\r\n    }, [\r\n        item,\r\n        environment,\r\n        treeId,\r\n        dnd,\r\n        isSelected,\r\n        isExpanded,\r\n        isRenaming,\r\n        isSearchMatching,\r\n        interactionManager,\r\n        selectUpTo,\r\n        setRenamingItem,\r\n        getOriginalItemOrder,\r\n    ]);\r\n};\r\nexports.useTreeItemRenderContext = useTreeItemRenderContext;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DragBetweenLine = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar Tree_1 = require(\"./Tree\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar DragBetweenLine = function (_a) {\r\n    var _b;\r\n    var treeId = _a.treeId;\r\n    var _c = (0, DragAndDropProvider_1.useDragAndDrop)(), draggingPosition = _c.draggingPosition, itemHeight = _c.itemHeight, itemsHeightArray = _c.itemsHeightArray;\r\n    var renderers = (0, Tree_1.useTree)().renderers;\r\n    var shouldDisplay = draggingPosition &&\r\n        draggingPosition.targetType === 'between-items' &&\r\n        draggingPosition.treeId === treeId;\r\n    if (!shouldDisplay) {\r\n        return null;\r\n    }\r\n    var lineProps = {\r\n        onDragOver: function (e) { return e.preventDefault(); }, // Allow dropping\r\n    };\r\n    return (React.createElement(\"div\", { style: {\r\n            position: 'absolute',\r\n            left: '0',\r\n            right: '0',\r\n            top: \"\".concat(itemsHeightArray.slice(0, (_b = draggingPosition === null || draggingPosition === void 0 ? void 0 : draggingPosition.linearIndex) !== null && _b !== void 0 ? _b : 0).reduce(function (acc, height) { return acc + height; }, 0), \"px\"),\r\n        } }, renderers.renderDragBetweenLine({\r\n        draggingPosition: draggingPosition,\r\n        lineProps: lineProps,\r\n    })));\r\n};\r\nexports.DragBetweenLine = DragBetweenLine;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LiveDescription = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar defaultLiveDescriptors_1 = require(\"./defaultLiveDescriptors\");\r\nvar Tree_1 = require(\"./Tree\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar resolveLiveDescriptor_1 = require(\"./resolveLiveDescriptor\");\r\nvar useKeyboardBindings_1 = require(\"../hotkeys/useKeyboardBindings\");\r\nvar LiveWrapper = function (_a) {\r\n    var children = _a.children, live = _a.live;\r\n    return React.createElement(\"div\", { \"aria-live\": live, dangerouslySetInnerHTML: { __html: children } });\r\n};\r\nvar LiveDescription = function () {\r\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var tree = (0, Tree_1.useTree)();\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    var keys = (0, useKeyboardBindings_1.useKeyboardBindings)();\r\n    var descriptors = (0, react_1.useMemo)(function () { var _a; return (_a = env.liveDescriptors) !== null && _a !== void 0 ? _a : defaultLiveDescriptors_1.defaultLiveDescriptors; }, [env.liveDescriptors]);\r\n    var MainWrapper = tree.renderers.renderLiveDescriptorContainer;\r\n    if (tree.treeInformation.isRenaming) {\r\n        return (React.createElement(MainWrapper, { tree: tree },\r\n            React.createElement(LiveWrapper, { live: \"polite\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.renamingItem, env, dnd, tree, keys))));\r\n    }\r\n    if (tree.treeInformation.isSearching) {\r\n        return (React.createElement(MainWrapper, { tree: tree },\r\n            React.createElement(LiveWrapper, { live: \"polite\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.searching, env, dnd, tree, keys))));\r\n    }\r\n    if (tree.treeInformation.isProgrammaticallyDragging) {\r\n        return (React.createElement(MainWrapper, { tree: tree },\r\n            React.createElement(LiveWrapper, { live: \"polite\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.programmaticallyDragging, env, dnd, tree, keys)),\r\n            React.createElement(LiveWrapper, { live: \"assertive\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.programmaticallyDraggingTarget, env, dnd, tree, keys))));\r\n    }\r\n    return (React.createElement(MainWrapper, { tree: tree },\r\n        React.createElement(LiveWrapper, { live: \"off\" }, (0, resolveLiveDescriptor_1.resolveLiveDescriptor)(descriptors.introduction, env, dnd, tree, keys))));\r\n};\r\nexports.LiveDescription = LiveDescription;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MaybeLiveDescription = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar LiveDescription_1 = require(\"./LiveDescription\");\r\nvar MaybeLiveDescription = function () {\r\n    var _a;\r\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    if (!((_a = env.showLiveDescription) !== null && _a !== void 0 ? _a : true)) {\r\n        return null;\r\n    }\r\n    return React.createElement(LiveDescription_1.LiveDescription, null);\r\n};\r\nexports.MaybeLiveDescription = MaybeLiveDescription;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tree = exports.useTree = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar TreeManager_1 = require(\"./TreeManager\");\r\nvar useCreatedTreeInformation_1 = require(\"./useCreatedTreeInformation\");\r\nvar getItemsLinearly_1 = require(\"./getItemsLinearly\");\r\nvar TreeActionsProvider_1 = require(\"../treeActions/TreeActionsProvider\");\r\nvar TreeContext = React.createContext(null); // TODO default value\r\nvar useTree = function () { return (0, react_1.useContext)(TreeContext); };\r\nexports.useTree = useTree;\r\nexports.Tree = React.forwardRef(function (props, ref) {\r\n    var _a;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var renderers = (0, react_1.useMemo)(function () { return (__assign(__assign({}, environment), props)); }, [props, environment]);\r\n    var _b = (0, react_1.useState)(null), search = _b[0], setSearch = _b[1];\r\n    var _c = (0, react_1.useState)(null), renamingItem = _c[0], setRenamingItem = _c[1];\r\n    var rootItem = environment.items[props.rootItem];\r\n    var viewState = environment.viewState[props.treeId];\r\n    (0, react_1.useEffect)(function () {\r\n        environment.registerTree({\r\n            treeId: props.treeId,\r\n            rootItem: props.rootItem,\r\n        });\r\n        return function () { return environment.unregisterTree(props.treeId); };\r\n        // TODO should be able to remove soon, and add environment.registerTree, environment.unregisterTree as deps\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [props.treeId, props.rootItem]);\r\n    var treeInformation = (0, useCreatedTreeInformation_1.useCreatedTreeInformation)(props, renamingItem, search);\r\n    var treeContextProps = (0, react_1.useMemo)(function () { return ({\r\n        treeId: props.treeId,\r\n        rootItem: props.rootItem,\r\n        treeLabel: props.treeLabel,\r\n        treeLabelledBy: props.treeLabelledBy,\r\n        getItemsLinearly: function () {\r\n            return (0, getItemsLinearly_1.getItemsLinearly)(props.rootItem, viewState !== null && viewState !== void 0 ? viewState : {}, environment.items);\r\n        },\r\n        treeInformation: treeInformation,\r\n        search: search,\r\n        setSearch: setSearch,\r\n        renamingItem: renamingItem,\r\n        setRenamingItem: setRenamingItem,\r\n        renderers: renderers,\r\n    }); }, [\r\n        environment.items,\r\n        props.rootItem,\r\n        props.treeId,\r\n        props.treeLabel,\r\n        props.treeLabelledBy,\r\n        renamingItem,\r\n        renderers,\r\n        search,\r\n        treeInformation,\r\n        viewState,\r\n    ]);\r\n    if (rootItem === undefined) {\r\n        (_a = environment.onMissingItems) === null || _a === void 0 ? void 0 : _a.call(environment, [props.rootItem]);\r\n        return null;\r\n    }\r\n    return (React.createElement(TreeContext.Provider, { value: treeContextProps },\r\n        React.createElement(TreeActionsProvider_1.TreeActionsProvider, { ref: ref },\r\n            React.createElement(TreeManager_1.TreeManager, null))));\r\n});\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TreeManager = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar TreeItemChildren_1 = require(\"../treeItem/TreeItemChildren\");\r\nvar DragBetweenLine_1 = require(\"./DragBetweenLine\");\r\nvar useFocusWithin_1 = require(\"./useFocusWithin\");\r\nvar useTreeKeyboardBindings_1 = require(\"./useTreeKeyboardBindings\");\r\nvar SearchInput_1 = require(\"../search/SearchInput\");\r\nvar Tree_1 = require(\"./Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar MaybeLiveDescription_1 = require(\"./MaybeLiveDescription\");\r\nvar TreeManager = function () {\r\n    var _a = (0, Tree_1.useTree)(), treeId = _a.treeId, rootItem = _a.rootItem, renderers = _a.renderers, treeInformation = _a.treeInformation;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var containerRef = (0, react_1.useRef)();\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    (0, useTreeKeyboardBindings_1.useTreeKeyboardBindings)();\r\n    (0, useFocusWithin_1.useFocusWithin)(containerRef.current, function () {\r\n        environment.setActiveTree(treeId);\r\n    }, function () {\r\n        environment.setActiveTree(function (oldTreeId) {\r\n            return oldTreeId === treeId ? undefined : oldTreeId;\r\n        });\r\n    });\r\n    var rootChildren = environment.items[rootItem].children;\r\n    var treeChildren = (React.createElement(React.Fragment, null,\r\n        React.createElement(MaybeLiveDescription_1.MaybeLiveDescription, null),\r\n        React.createElement(TreeItemChildren_1.TreeItemChildren, { depth: 0, parentId: rootItem }, rootChildren !== null && rootChildren !== void 0 ? rootChildren : []),\r\n        React.createElement(DragBetweenLine_1.DragBetweenLine, { treeId: treeId }),\r\n        React.createElement(SearchInput_1.SearchInput, { containerRef: containerRef.current })));\r\n    var containerProps = __assign({ onDragOver: function (e) {\r\n            e.preventDefault(); // Allow drop. Also implicitly set by items, but needed here as well for dropping on empty space\r\n            dnd.onDragOverTreeHandler(e, treeId, containerRef);\r\n        }, onMouseDown: function () { return dnd.abortProgrammaticDrag(); }, ref: containerRef, style: { position: 'relative' }, role: 'tree', 'aria-label': !treeInformation.treeLabelledBy\r\n            ? treeInformation.treeLabel\r\n            : undefined, 'aria-labelledby': treeInformation.treeLabelledBy }, {\r\n        'data-rct-tree': treeId,\r\n    });\r\n    return renderers.renderTreeContainer({\r\n        children: treeChildren,\r\n        info: treeInformation,\r\n        containerProps: containerProps,\r\n    });\r\n};\r\nexports.TreeManager = TreeManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.defaultLiveDescriptors = void 0;\r\nexports.defaultLiveDescriptors = {\r\n    introduction: \"\\n    <p>Accessibility guide for tree {treeLabel}.</p>\\n    <p>\\n      Navigate the tree with the arrow keys. Common tree hotkeys apply. Further keybindings are available:\\n    </p>\\n    <ul>\\n      <li>{keybinding:primaryAction} to execute primary action on focused item</li>\\n      <li>{keybinding:renameItem} to start renaming the focused item</li>\\n      <li>{keybinding:abortRenameItem} to abort renaming an item</li>\\n      <li>{keybinding:startProgrammaticDnd} to start dragging selected items</li>\\n    </ul>\\n  \",\r\n    renamingItem: \"\\n    <p>Renaming the item {renamingItem}.</p>\\n    <p>Use the keybinding {keybinding:abortRenameItem} to abort renaming.</p>\\n  \",\r\n    searching: \"\\n    <p>Searching</p>\\n  \",\r\n    programmaticallyDragging: \"\\n    <p>Dragging items {dragItems}.</p>\\n    <p>Press the arrow keys to move the drag target.</p>\\n    <p>Press {keybinding:completeProgrammaticDnd} to drop or {keybinding:abortProgrammaticDnd} to abort.</p>\\n  \",\r\n    programmaticallyDraggingTarget: \"\\n    <p>Drop target is {dropTarget}.</p>\\n  \",\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getItemsLinearly = void 0;\r\nvar getItemsLinearly = function (rootItem, viewState, items, depth) {\r\n    var _a, _b, _c;\r\n    if (depth === void 0) { depth = 0; }\r\n    var itemIds = [];\r\n    for (var _i = 0, _d = (_b = (_a = items[rootItem]) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : []; _i < _d.length; _i++) {\r\n        var itemId = _d[_i];\r\n        var item = items[itemId];\r\n        itemIds.push({ item: itemId, depth: depth });\r\n        if (item &&\r\n            item.isFolder &&\r\n            !!item.children &&\r\n            ((_c = viewState.expandedItems) === null || _c === void 0 ? void 0 : _c.includes(itemId))) {\r\n            itemIds.push.apply(itemIds, (0, exports.getItemsLinearly)(itemId, viewState, items, depth + 1));\r\n        }\r\n    }\r\n    return itemIds;\r\n};\r\nexports.getItemsLinearly = getItemsLinearly;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.resolveLiveDescriptor = void 0;\r\nvar resolveLiveDescriptor = function (descriptor, environment, dnd, tree, keyboardBindings) {\r\n    var getItemTitle = function (index) {\r\n        return environment.getItemTitle(environment.items[index]);\r\n    };\r\n    return descriptor.replace(/({[^\\s}]+)}/g, function (variableNameWithBrackets) {\r\n        var _a, _b, _c;\r\n        var variableName = variableNameWithBrackets.slice(1, -1);\r\n        switch (variableName) {\r\n            case 'treeLabel':\r\n                return (_a = tree.treeLabel) !== null && _a !== void 0 ? _a : '';\r\n            case 'renamingItem':\r\n                return tree.renamingItem ? getItemTitle(tree.renamingItem) : 'None';\r\n            case 'dragItems':\r\n                return ((_c = (_b = dnd.draggingItems) === null || _b === void 0 ? void 0 : _b.map(function (item) { return environment.getItemTitle(item); }).join(', ')) !== null && _c !== void 0 ? _c : 'None');\r\n            case 'dropTarget': {\r\n                if (!dnd.draggingPosition) {\r\n                    return 'None';\r\n                }\r\n                if (dnd.draggingPosition.targetType === 'item' ||\r\n                    dnd.draggingPosition.targetType === 'root') {\r\n                    return \"within \".concat(getItemTitle(dnd.draggingPosition.targetItem));\r\n                }\r\n                var parentItem = environment.items[dnd.draggingPosition.parentItem];\r\n                var parentTitle = environment.getItemTitle(parentItem);\r\n                if (dnd.draggingPosition.childIndex === 0) {\r\n                    return \"within \".concat(parentTitle, \" at the start\");\r\n                }\r\n                return \"within \".concat(parentTitle, \" after \").concat(getItemTitle(parentItem.children[dnd.draggingPosition.childIndex - 1]));\r\n            }\r\n            default:\r\n                if (variableName.startsWith('keybinding:')) {\r\n                    return keyboardBindings[variableName.slice(11)][0];\r\n                }\r\n                throw Error(\"Unknown live descriptor variable {\".concat(variableName, \"}\"));\r\n        }\r\n    });\r\n};\r\nexports.resolveLiveDescriptor = resolveLiveDescriptor;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.scrollIntoView = void 0;\r\nvar utils_1 = require(\"../utils\");\r\nvar scrollIntoView = function (element) {\r\n    var _a, _b, _c, _d;\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.scrollIntoViewIfNeeded) {\r\n        element.scrollIntoViewIfNeeded();\r\n    }\r\n    else {\r\n        var boundingBox = element.getBoundingClientRect();\r\n        var isElementInViewport = boundingBox.top >= 0 &&\r\n            boundingBox.left >= 0 &&\r\n            boundingBox.bottom <=\r\n                (window.innerHeight ||\r\n                    !!((_b = (_a = (0, utils_1.getDocument)()) === null || _a === void 0 ? void 0 : _a.documentElement) === null || _b === void 0 ? void 0 : _b.clientHeight)) &&\r\n            boundingBox.right <=\r\n                (window.innerWidth || !!((_d = (_c = (0, utils_1.getDocument)()) === null || _c === void 0 ? void 0 : _c.documentElement) === null || _d === void 0 ? void 0 : _d.clientWidth));\r\n        if (!isElementInViewport) {\r\n            element.scrollIntoView();\r\n        }\r\n    }\r\n};\r\nexports.scrollIntoView = scrollIntoView;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useCreatedTreeInformation = void 0;\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar useCreatedTreeInformation = function (tree, renamingItem, search) {\r\n    var _a;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    var selectedItems = (_a = environment.viewState[tree.treeId]) === null || _a === void 0 ? void 0 : _a.selectedItems;\r\n    return (0, react_1.useMemo)(function () {\r\n        var _a, _b;\r\n        return ({\r\n            isFocused: environment.activeTreeId === tree.treeId,\r\n            isRenaming: !!renamingItem,\r\n            areItemsSelected: ((_a = selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length) !== null && _a !== void 0 ? _a : 0) > 0,\r\n            isSearching: search !== null,\r\n            search: search,\r\n            isProgrammaticallyDragging: (_b = dnd.isProgrammaticallyDragging) !== null && _b !== void 0 ? _b : false,\r\n            treeId: tree.treeId,\r\n            rootItem: tree.rootItem,\r\n            treeLabel: tree.treeLabel,\r\n            treeLabelledBy: tree.treeLabelledBy,\r\n        });\r\n    }, [\r\n        environment.activeTreeId,\r\n        tree.treeId,\r\n        tree.rootItem,\r\n        tree.treeLabel,\r\n        tree.treeLabelledBy,\r\n        renamingItem,\r\n        selectedItems === null || selectedItems === void 0 ? void 0 : selectedItems.length,\r\n        search,\r\n        dnd.isProgrammaticallyDragging,\r\n    ]);\r\n};\r\nexports.useCreatedTreeInformation = useCreatedTreeInformation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useFocusWithin = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useHtmlElementEventListener_1 = require(\"../useHtmlElementEventListener\");\r\nvar useCallSoon_1 = require(\"../useCallSoon\");\r\nvar useFocusWithin = function (element, onFocusIn, onFocusOut) {\r\n    var _a = (0, react_1.useState)(false), focusWithin = _a[0], setFocusWithin = _a[1];\r\n    var isLoosingFocusFlag = (0, react_1.useRef)(false);\r\n    var callSoon = (0, useCallSoon_1.useCallSoon)();\r\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)(element, 'focusin', function () {\r\n        if (!focusWithin) {\r\n            setFocusWithin(true);\r\n            onFocusIn === null || onFocusIn === void 0 ? void 0 : onFocusIn();\r\n        }\r\n        if (isLoosingFocusFlag.current) {\r\n            isLoosingFocusFlag.current = false;\r\n        }\r\n    });\r\n    (0, useHtmlElementEventListener_1.useHtmlElementEventListener)(element, 'focusout', function () {\r\n        isLoosingFocusFlag.current = true;\r\n        callSoon(function () {\r\n            if (isLoosingFocusFlag.current &&\r\n                !(element === null || element === void 0 ? void 0 : element.contains(document.activeElement))) {\r\n                onFocusOut === null || onFocusOut === void 0 ? void 0 : onFocusOut();\r\n                isLoosingFocusFlag.current = false;\r\n                setFocusWithin(false);\r\n            }\r\n        });\r\n    });\r\n    return focusWithin;\r\n};\r\nexports.useFocusWithin = useFocusWithin;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useMoveFocusToIndex = void 0;\r\nvar useViewState_1 = require(\"./useViewState\");\r\nvar Tree_1 = require(\"./Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\r\nvar useStableHandler_1 = require(\"../useStableHandler\");\r\nvar useMoveFocusToIndex = function () {\r\n    var treeId = (0, Tree_1.useTree)().treeId;\r\n    var _a = (0, ControlledTreeEnvironment_1.useTreeEnvironment)(), onFocusItem = _a.onFocusItem, items = _a.items;\r\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\r\n    var viewState = (0, useViewState_1.useViewState)();\r\n    return (0, useStableHandler_1.useStableHandler)(function (computeNewIndex) {\r\n        var _a;\r\n        var currentIndex = (_a = linearItems.findIndex(function (item) { return item.item === viewState.focusedItem; })) !== null && _a !== void 0 ? _a : 0;\r\n        var newIndex = computeNewIndex(currentIndex, linearItems);\r\n        var newIndexBounded = Math.max(0, Math.min(linearItems.length - 1, newIndex));\r\n        var newFocusItem = items[linearItems[newIndexBounded].item];\r\n        onFocusItem === null || onFocusItem === void 0 ? void 0 : onFocusItem(newFocusItem, treeId);\r\n        return newFocusItem;\r\n    });\r\n};\r\nexports.useMoveFocusToIndex = useMoveFocusToIndex;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useSelectUpTo = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useViewState_1 = require(\"./useViewState\");\r\nvar Tree_1 = require(\"./Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\r\nvar usePrevious = function (value) {\r\n    var ref = (0, react_1.useRef)({\r\n        target: value,\r\n        previous: undefined,\r\n    });\r\n    if (ref.current.target !== value) {\r\n        ref.current.previous = ref.current.target;\r\n        ref.current.target = value;\r\n    }\r\n    return ref.current.previous;\r\n};\r\nvar useSelectUpTo = function (startingAt) {\r\n    var viewState = (0, useViewState_1.useViewState)();\r\n    var treeId = (0, Tree_1.useTree)().treeId;\r\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\r\n    var onSelectItems = (0, ControlledTreeEnvironment_1.useTreeEnvironment)().onSelectItems;\r\n    var focusedItemPrevious = usePrevious(viewState.focusedItem);\r\n    return (0, react_1.useCallback)(function (item, overrideOldSelection) {\r\n        var _a, _b;\r\n        if (overrideOldSelection === void 0) { overrideOldSelection = false; }\r\n        var itemIndex = item.index;\r\n        var selectMergedItems = function (oldSelection, newSelection) {\r\n            var merged = __spreadArray(__spreadArray([], (overrideOldSelection ? [] : oldSelection), true), newSelection.filter(function (i) { return overrideOldSelection || !oldSelection.includes(i); }), true);\r\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems(merged, treeId);\r\n        };\r\n        if (viewState &&\r\n            viewState.selectedItems &&\r\n            viewState.selectedItems.length > 0) {\r\n            // Depending on whether focusItem() or selectUpTo() was called first, which item was the last focused item depends\r\n            var lastFocus_1 = viewState.focusedItem === itemIndex\r\n                ? focusedItemPrevious\r\n                : viewState.focusedItem;\r\n            var selectionStart = startingAt === 'last-focus'\r\n                ? linearItems.findIndex(function (linearItem) { return lastFocus_1 === linearItem.item; })\r\n                : linearItems.findIndex(function (linearItem) { var _a; return (_a = viewState.selectedItems) === null || _a === void 0 ? void 0 : _a.includes(linearItem.item); });\r\n            var selectionEnd = linearItems.findIndex(function (linearItem) { return linearItem.item === itemIndex; });\r\n            if (selectionStart < selectionEnd) {\r\n                var selection = linearItems\r\n                    .slice(selectionStart, selectionEnd + 1)\r\n                    .map(function (_a) {\r\n                    var item = _a.item;\r\n                    return item;\r\n                });\r\n                selectMergedItems((_a = viewState.selectedItems) !== null && _a !== void 0 ? _a : [], selection);\r\n            }\r\n            else {\r\n                var selection = linearItems\r\n                    .slice(selectionEnd, selectionStart + 1)\r\n                    .map(function (_a) {\r\n                    var item = _a.item;\r\n                    return item;\r\n                });\r\n                selectMergedItems((_b = viewState.selectedItems) !== null && _b !== void 0 ? _b : [], selection);\r\n            }\r\n        }\r\n        else {\r\n            onSelectItems === null || onSelectItems === void 0 ? void 0 : onSelectItems([itemIndex], treeId);\r\n        }\r\n    }, [\r\n        viewState,\r\n        onSelectItems,\r\n        treeId,\r\n        startingAt,\r\n        linearItems,\r\n        focusedItemPrevious,\r\n    ]);\r\n};\r\nexports.useSelectUpTo = useSelectUpTo;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useTreeKeyboardBindings = void 0;\r\nvar useKey_1 = require(\"../hotkeys/useKey\");\r\nvar useHotkey_1 = require(\"../hotkeys/useHotkey\");\r\nvar useMoveFocusToIndex_1 = require(\"./useMoveFocusToIndex\");\r\nvar useViewState_1 = require(\"./useViewState\");\r\nvar Tree_1 = require(\"./Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar DragAndDropProvider_1 = require(\"../drag/DragAndDropProvider\");\r\nvar useSelectUpTo_1 = require(\"./useSelectUpTo\");\r\nvar useLinearItems_1 = require(\"../controlledEnvironment/useLinearItems\");\r\nvar useTreeKeyboardBindings = function () {\r\n    var _a;\r\n    var environment = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    var _b = (0, Tree_1.useTree)(), treeId = _b.treeId, setRenamingItem = _b.setRenamingItem, setSearch = _b.setSearch, renamingItem = _b.renamingItem;\r\n    var linearItems = (0, useLinearItems_1.useLinearItems)(treeId);\r\n    var dnd = (0, DragAndDropProvider_1.useDragAndDrop)();\r\n    var viewState = (0, useViewState_1.useViewState)();\r\n    var moveFocusToIndex = (0, useMoveFocusToIndex_1.useMoveFocusToIndex)();\r\n    var selectUpTo = (0, useSelectUpTo_1.useSelectUpTo)('first-selected');\r\n    var isActiveTree = environment.activeTreeId === treeId;\r\n    var isRenaming = !!renamingItem;\r\n    (0, useKey_1.useKey)('arrowdown', function (e) {\r\n        e.preventDefault();\r\n        if (dnd.isProgrammaticallyDragging) {\r\n            dnd.programmaticDragDown();\r\n        }\r\n        else {\r\n            var newFocusItem = moveFocusToIndex(function (currentIndex) { return currentIndex + 1; });\r\n            if (e.shiftKey) {\r\n                selectUpTo(newFocusItem);\r\n            }\r\n        }\r\n    }, isActiveTree && !isRenaming);\r\n    (0, useKey_1.useKey)('arrowup', function (e) {\r\n        e.preventDefault();\r\n        if (dnd.isProgrammaticallyDragging) {\r\n            dnd.programmaticDragUp();\r\n        }\r\n        else {\r\n            var newFocusItem = moveFocusToIndex(function (currentIndex) { return currentIndex - 1; });\r\n            if (e.shiftKey) {\r\n                selectUpTo(newFocusItem);\r\n            }\r\n        }\r\n    }, isActiveTree && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('moveFocusToFirstItem', function (e) {\r\n        e.preventDefault();\r\n        moveFocusToIndex(function () { return 0; });\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('moveFocusToLastItem', function (e) {\r\n        e.preventDefault();\r\n        moveFocusToIndex(function (currentIndex, linearItems) { return linearItems.length - 1; });\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useKey_1.useKey)('arrowright', function (e) {\r\n        e.preventDefault();\r\n        moveFocusToIndex(function (currentIndex, linearItems) {\r\n            var _a, _b;\r\n            var item = environment.items[linearItems[currentIndex].item];\r\n            if (item.isFolder) {\r\n                if ((_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(item.index)) {\r\n                    return currentIndex + 1;\r\n                }\r\n                (_b = environment.onExpandItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\r\n            }\r\n            return currentIndex;\r\n        });\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useKey_1.useKey)('arrowleft', function (e) {\r\n        e.preventDefault();\r\n        moveFocusToIndex(function (currentIndex, linearItems) {\r\n            var _a, _b;\r\n            var item = environment.items[linearItems[currentIndex].item];\r\n            var itemDepth = linearItems[currentIndex].depth;\r\n            if (item.isFolder && ((_a = viewState.expandedItems) === null || _a === void 0 ? void 0 : _a.includes(item.index))) {\r\n                (_b = environment.onCollapseItem) === null || _b === void 0 ? void 0 : _b.call(environment, item, treeId);\r\n            }\r\n            else if (itemDepth > 0) {\r\n                var parentIndex = currentIndex;\r\n                for (parentIndex; linearItems[parentIndex].depth !== itemDepth - 1; parentIndex -= 1)\r\n                    ;\r\n                return parentIndex;\r\n            }\r\n            return currentIndex;\r\n        });\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('primaryAction', function (e) {\r\n        var _a, _b;\r\n        e.preventDefault();\r\n        if (viewState.focusedItem !== undefined) {\r\n            (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, [viewState.focusedItem], treeId);\r\n            (_b = environment.onPrimaryAction) === null || _b === void 0 ? void 0 : _b.call(environment, environment.items[viewState.focusedItem], treeId);\r\n        }\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('toggleSelectItem', function (e) {\r\n        var _a, _b, _c;\r\n        e.preventDefault();\r\n        if (viewState.focusedItem !== undefined) {\r\n            if (viewState.selectedItems &&\r\n                viewState.selectedItems.includes(viewState.focusedItem)) {\r\n                (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, viewState.selectedItems.filter(function (item) { return item !== viewState.focusedItem; }), treeId);\r\n            }\r\n            else {\r\n                (_b = environment.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(environment, __spreadArray(__spreadArray([], ((_c = viewState.selectedItems) !== null && _c !== void 0 ? _c : []), true), [viewState.focusedItem], false), treeId);\r\n            }\r\n        }\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('selectAll', function (e) {\r\n        var _a;\r\n        e.preventDefault();\r\n        (_a = environment.onSelectItems) === null || _a === void 0 ? void 0 : _a.call(environment, linearItems.map(function (_a) {\r\n            var item = _a.item;\r\n            return item;\r\n        }), treeId);\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('renameItem', function (e) {\r\n        var _a;\r\n        if (viewState.focusedItem === undefined) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        var item = environment.items[viewState.focusedItem];\r\n        if (item.canRename === false) {\r\n            return;\r\n        }\r\n        (_a = environment.onStartRenamingItem) === null || _a === void 0 ? void 0 : _a.call(environment, item, treeId);\r\n        setRenamingItem(item.index);\r\n    }, isActiveTree && ((_a = environment.canRename) !== null && _a !== void 0 ? _a : true) && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('startSearch', function (e) {\r\n        var _a, _b;\r\n        e.preventDefault();\r\n        setSearch('');\r\n        (_b = (_a = document.querySelector('[data-rct-search-input=\"true\"]')) === null || _a === void 0 ? void 0 : _a.focus) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n    }, isActiveTree && !dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('startProgrammaticDnd', function (e) {\r\n        e.preventDefault();\r\n        dnd.startProgrammaticDrag();\r\n    }, isActiveTree && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('completeProgrammaticDnd', function (e) {\r\n        e.preventDefault();\r\n        dnd.completeProgrammaticDrag();\r\n    }, isActiveTree && dnd.isProgrammaticallyDragging && !isRenaming);\r\n    (0, useHotkey_1.useHotkey)('abortProgrammaticDnd', function (e) {\r\n        e.preventDefault();\r\n        dnd.abortProgrammaticDrag();\r\n    }, isActiveTree && dnd.isProgrammaticallyDragging && !isRenaming);\r\n};\r\nexports.useTreeKeyboardBindings = useTreeKeyboardBindings;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useViewState = void 0;\r\nvar Tree_1 = require(\"./Tree\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useViewState = function () {\r\n    var _a;\r\n    var treeId = (0, Tree_1.useTree)().treeId;\r\n    var viewState = (0, ControlledTreeEnvironment_1.useTreeEnvironment)().viewState;\r\n    return (_a = viewState[treeId]) !== null && _a !== void 0 ? _a : {};\r\n};\r\nexports.useViewState = useViewState;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InteractionMode = void 0;\r\nvar InteractionMode;\r\n(function (InteractionMode) {\r\n    InteractionMode[\"DoubleClickItemToExpand\"] = \"double-click-item-to-expand\";\r\n    InteractionMode[\"ClickItemToExpand\"] = \"click-item-to-expand\";\r\n    InteractionMode[\"ClickArrowToExpand\"] = \"click-arrow-to-expand\";\r\n})(InteractionMode = exports.InteractionMode || (exports.InteractionMode = {}));\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CompleteTreeDataProvider = void 0;\r\nvar CompleteTreeDataProvider = /** @class */ (function () {\r\n    function CompleteTreeDataProvider(provider) {\r\n        this.provider = provider;\r\n    }\r\n    CompleteTreeDataProvider.prototype.getTreeItem = function (itemId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.provider.getTreeItem(itemId)];\r\n            });\r\n        });\r\n    };\r\n    CompleteTreeDataProvider.prototype.getTreeItems = function (itemIds) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.provider.getTreeItems\r\n                        ? this.provider.getTreeItems(itemIds)\r\n                        : Promise.all(itemIds.map(function (id) { return _this.provider.getTreeItem(id); }))];\r\n            });\r\n        });\r\n    };\r\n    CompleteTreeDataProvider.prototype.onChangeItemChildren = function (itemId, newChildren) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, (_b = (_a = this.provider).onChangeItemChildren) === null || _b === void 0 ? void 0 : _b.call(_a, itemId, newChildren)];\r\n            });\r\n        });\r\n    };\r\n    CompleteTreeDataProvider.prototype.onDidChangeTreeData = function (listener) {\r\n        return this.provider.onDidChangeTreeData\r\n            ? this.provider.onDidChangeTreeData(listener)\r\n            : { dispose: function () { } };\r\n    };\r\n    CompleteTreeDataProvider.prototype.onRenameItem = function (item, name) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_c) {\r\n                return [2 /*return*/, (_b = (_a = this.provider).onRenameItem) === null || _b === void 0 ? void 0 : _b.call(_a, item, name)];\r\n            });\r\n        });\r\n    };\r\n    return CompleteTreeDataProvider;\r\n}());\r\nexports.CompleteTreeDataProvider = CompleteTreeDataProvider;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StaticTreeDataProvider = void 0;\r\nvar EventEmitter_1 = require(\"../EventEmitter\");\r\nvar StaticTreeDataProvider = /** @class */ (function () {\r\n    function StaticTreeDataProvider(items, setItemName\r\n    // private implicitItemOrdering?: (itemA: TreeItem<T>, itemB: TreeItem<T>) => number,\r\n    ) {\r\n        /** Emit an event with the changed item ids to notify the tree view about changes. */\r\n        this.onDidChangeTreeDataEmitter = new EventEmitter_1.EventEmitter();\r\n        this.data = { items: items };\r\n        this.setItemName = setItemName;\r\n    }\r\n    StaticTreeDataProvider.prototype.getTreeItem = function (itemId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this.data.items[itemId]];\r\n            });\r\n        });\r\n    };\r\n    StaticTreeDataProvider.prototype.onChangeItemChildren = function (itemId, newChildren) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this.data.items[itemId].children = newChildren;\r\n                this.onDidChangeTreeDataEmitter.emit([itemId]);\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    StaticTreeDataProvider.prototype.onDidChangeTreeData = function (listener) {\r\n        var _this = this;\r\n        var handlerId = this.onDidChangeTreeDataEmitter.on(function (payload) {\r\n            return listener(payload);\r\n        });\r\n        return { dispose: function () { return _this.onDidChangeTreeDataEmitter.off(handlerId); } };\r\n    };\r\n    StaticTreeDataProvider.prototype.onRenameItem = function (item, name) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (this.setItemName) {\r\n                    this.data.items[item.index] = this.setItemName(item, name);\r\n                    // this.onDidChangeTreeDataEmitter.emit(item.index);\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return StaticTreeDataProvider;\r\n}());\r\nexports.StaticTreeDataProvider = StaticTreeDataProvider;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UncontrolledTreeEnvironment = void 0;\r\nvar React = __importStar(require(\"react\"));\r\nvar react_1 = require(\"react\");\r\nvar ControlledTreeEnvironment_1 = require(\"../controlledEnvironment/ControlledTreeEnvironment\");\r\nvar CompleteTreeDataProvider_1 = require(\"./CompleteTreeDataProvider\");\r\nvar useIsMounted_1 = require(\"../useIsMounted\");\r\nvar useRefCopy_1 = require(\"../useRefCopy\");\r\n/* const createCompleteDataProvider = (provider: TreeDataProvider): CompleteTreeDataProvider => ({ // TODO Write class that internally uses provider instead\r\n  ...provider,\r\n  getTreeItem: provider.getTreeItem,\r\n  onDidChangeTreeData: provider.onDidChangeTreeData?.bind(provider) ?? (() => ({ dispose: () => {} })),\r\n  getTreeItems: provider.getTreeItems?.bind(provider) ?? (itemIds => Promise.all(itemIds.map(id => provider.getTreeItem(id)))),\r\n  onRenameItem: provider.onRenameItem?.bind(provider) ?? (async () => {}),\r\n  onChangeItemChildren: provider.onChangeItemChildren?.bind(provider) ?? (async () => {}),\r\n}); */\r\nexports.UncontrolledTreeEnvironment = React.forwardRef(function (props, ref) {\r\n    var _a = (0, react_1.useState)({}), currentItems = _a[0], setCurrentItems = _a[1];\r\n    var _b = (0, react_1.useState)(props.viewState), viewState = _b[0], setViewState = _b[1];\r\n    var viewStateRef = (0, useRefCopy_1.useRefCopy)(viewState);\r\n    var missingItemIds = (0, react_1.useRef)([]);\r\n    var dataProvider = (0, react_1.useMemo)(function () { return new CompleteTreeDataProvider_1.CompleteTreeDataProvider(props.dataProvider); }, [props.dataProvider]);\r\n    var isMounted = (0, useIsMounted_1.useIsMounted)();\r\n    var writeItems = (0, react_1.useCallback)(function (newItems) {\r\n        if (!isMounted.current)\r\n            return;\r\n        setCurrentItems(function (oldItems) { return (__assign(__assign({}, oldItems), newItems)); });\r\n    }, [isMounted]);\r\n    var amendViewState = (0, react_1.useCallback)(function (treeId, constructNewState) {\r\n        setViewState(function (oldState) {\r\n            var _a;\r\n            var _b;\r\n            return (__assign(__assign({}, oldState), (_a = {}, _a[treeId] = __assign(__assign({}, oldState[treeId]), constructNewState((_b = oldState[treeId]) !== null && _b !== void 0 ? _b : {})), _a)));\r\n        });\r\n    }, []);\r\n    (0, react_1.useEffect)(function () {\r\n        var dispose = dataProvider.onDidChangeTreeData(function (changedItemIds) {\r\n            dataProvider.getTreeItems(changedItemIds).then(function (items) {\r\n                writeItems(items\r\n                    .map(function (item) {\r\n                    var _a;\r\n                    return (_a = {}, _a[item.index] = item, _a);\r\n                })\r\n                    .reduce(function (a, b) { return (__assign(__assign({}, a), b)); }, {}));\r\n            });\r\n        }).dispose;\r\n        return dispose;\r\n    }, [dataProvider, writeItems]);\r\n    // TODO memoize props or this component itself\r\n    return (React.createElement(ControlledTreeEnvironment_1.ControlledTreeEnvironment, __assign({}, props, { ref: ref, viewState: viewState, items: currentItems, onExpandItem: function (item, treeId) {\r\n            var _a;\r\n            amendViewState(treeId, function (old) {\r\n                var _a;\r\n                return (__assign(__assign({}, old), { expandedItems: __spreadArray(__spreadArray([], ((_a = old.expandedItems) !== null && _a !== void 0 ? _a : []), true), [item.index], false) }));\r\n            });\r\n            (_a = props.onExpandItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\r\n        }, onCollapseItem: function (item, treeId) {\r\n            var _a;\r\n            amendViewState(treeId, function (old) {\r\n                var _a;\r\n                return (__assign(__assign({}, old), { expandedItems: (_a = old.expandedItems) === null || _a === void 0 ? void 0 : _a.filter(function (id) { return id !== item.index; }) }));\r\n            });\r\n            (_a = props.onCollapseItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\r\n        }, onSelectItems: function (items, treeId) {\r\n            var _a, _b, _c;\r\n            var oldFocusedItem = (_a = viewStateRef.current[treeId]) === null || _a === void 0 ? void 0 : _a.focusedItem;\r\n            if (props.disableMultiselect) {\r\n                var newSelected_1 = oldFocusedItem ? [oldFocusedItem] : [];\r\n                (_b = props.onSelectItems) === null || _b === void 0 ? void 0 : _b.call(props, newSelected_1, treeId);\r\n                amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { selectedItems: newSelected_1 })); });\r\n            }\r\n            else {\r\n                (_c = props.onSelectItems) === null || _c === void 0 ? void 0 : _c.call(props, items, treeId);\r\n                amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { selectedItems: items })); });\r\n            }\r\n        }, onFocusItem: function (item, treeId) {\r\n            var _a;\r\n            amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { focusedItem: item.index })); });\r\n            (_a = props.onFocusItem) === null || _a === void 0 ? void 0 : _a.call(props, item, treeId);\r\n        }, onRenameItem: function (item, name, treeId) { return __awaiter(void 0, void 0, void 0, function () {\r\n            var newItem;\r\n            var _a;\r\n            var _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, dataProvider.onRenameItem(item, name)];\r\n                    case 1:\r\n                        _c.sent();\r\n                        amendViewState(treeId, function (old) { return (__assign(__assign({}, old), { renamingItem: undefined })); });\r\n                        return [4 /*yield*/, dataProvider.getTreeItem(item.index)];\r\n                    case 2:\r\n                        newItem = _c.sent();\r\n                        writeItems((_a = {}, _a[item.index] = newItem, _a));\r\n                        (_b = props.onRenameItem) === null || _b === void 0 ? void 0 : _b.call(props, item, name, treeId);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, onDrop: function (items, target) { return __awaiter(void 0, void 0, void 0, function () {\r\n            var promises, itemsIndices, itemsPriorToInsertion, _loop_1, _i, items_1, item, state_1, newParent, newParentChildren;\r\n            var _a, _b, _c, _d, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        promises = [];\r\n                        itemsIndices = items.map(function (i) { return i.index; });\r\n                        itemsPriorToInsertion = 0;\r\n                        _loop_1 = function (item) {\r\n                            var parent_1 = Object.values(currentItems).find(function (potentialParent) { var _a, _b; return (_b = (_a = potentialParent === null || potentialParent === void 0 ? void 0 : potentialParent.children) === null || _a === void 0 ? void 0 : _a.includes) === null || _b === void 0 ? void 0 : _b.call(_a, item.index); });\r\n                            if (!parent_1) {\r\n                                throw Error(\"Could not find parent of item \\\"\".concat(item.index, \"\\\"\"));\r\n                            }\r\n                            if (!parent_1.children) {\r\n                                throw Error(\"Parent \\\"\".concat(parent_1.index, \"\\\" of item \\\"\").concat(item.index, \"\\\" did not have any children\"));\r\n                            }\r\n                            if (target.targetType === 'between-items' &&\r\n                                target.parentItem === item.index) {\r\n                                return { value: void 0 };\r\n                            }\r\n                            if ((target.targetType === 'item' || target.targetType === 'root') &&\r\n                                target.targetItem !== parent_1.index) {\r\n                                promises.push(dataProvider.onChangeItemChildren(parent_1.index, parent_1.children.filter(function (child) { return child !== item.index; })));\r\n                            }\r\n                            if (target.targetType === 'between-items') {\r\n                                if (target.parentItem === parent_1.index) {\r\n                                    var newParent = currentItems[target.parentItem];\r\n                                    var isOldItemPriorToNewItem = ((_b = ((_a = newParent.children) !== null && _a !== void 0 ? _a : []).findIndex(function (child) { return child === item.index; })) !== null && _b !== void 0 ? _b : Infinity) < target.childIndex;\r\n                                    itemsPriorToInsertion += isOldItemPriorToNewItem ? 1 : 0;\r\n                                }\r\n                                else {\r\n                                    promises.push(dataProvider.onChangeItemChildren(parent_1.index, parent_1.children.filter(function (child) { return child !== item.index; })));\r\n                                }\r\n                            }\r\n                        };\r\n                        // move old items out\r\n                        for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n                            item = items_1[_i];\r\n                            state_1 = _loop_1(item);\r\n                            if (typeof state_1 === \"object\")\r\n                                return [2 /*return*/, state_1.value];\r\n                        }\r\n                        // insert new items\r\n                        if (target.targetType === 'item' || target.targetType === 'root') {\r\n                            promises.push(dataProvider.onChangeItemChildren(target.targetItem, __spreadArray(__spreadArray([], ((_c = currentItems[target.targetItem].children) !== null && _c !== void 0 ? _c : []).filter(function (i) { return !itemsIndices.includes(i); }), true), itemsIndices, true)));\r\n                        }\r\n                        else {\r\n                            newParent = currentItems[target.parentItem];\r\n                            newParentChildren = __spreadArray([], ((_d = newParent.children) !== null && _d !== void 0 ? _d : []), true).filter(function (c) { return !itemsIndices.includes(c); });\r\n                            newParentChildren.splice.apply(newParentChildren, __spreadArray([target.childIndex - itemsPriorToInsertion,\r\n                                0], itemsIndices, false));\r\n                            promises.push(dataProvider.onChangeItemChildren(target.parentItem, newParentChildren));\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(promises)];\r\n                    case 1:\r\n                        _f.sent();\r\n                        (_e = props.onDrop) === null || _e === void 0 ? void 0 : _e.call(props, items, target);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, onMissingItems: function (itemIds) {\r\n            var _a;\r\n            var _b;\r\n            // Batch individual fetch-item-calls together\r\n            if (missingItemIds.current.length === 0) {\r\n                setTimeout(function () {\r\n                    dataProvider.getTreeItems(missingItemIds.current).then(function (items) {\r\n                        writeItems(items\r\n                            .map(function (item) {\r\n                            var _a;\r\n                            return (_a = {}, _a[item === null || item === void 0 ? void 0 : item.index] = item, _a);\r\n                        })\r\n                            .reduce(function (a, b) { return (__assign(__assign({}, a), b)); }, {}));\r\n                    });\r\n                    missingItemIds.current = [];\r\n                });\r\n            }\r\n            (_a = missingItemIds.current).push.apply(_a, itemIds);\r\n            (_b = props.onMissingItems) === null || _b === void 0 ? void 0 : _b.call(props, itemIds);\r\n        } }), props.children));\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useCallSoon = void 0;\r\nvar react_1 = require(\"react\");\r\n/**\r\n * React hook that schedules a callback to be run \"soon\" and will cancel the\r\n * callback if it is still pending when the component is unmounted.\r\n *\r\n * @returns A function that can be used to schedule a deferred callback.\r\n */\r\nfunction useCallSoon(dontClean) {\r\n    if (dontClean === void 0) { dontClean = false; }\r\n    var handleRef = (0, react_1.useRef)(new Array());\r\n    (0, react_1.useEffect)(function () {\r\n        if (dontClean) {\r\n            return function () { };\r\n        }\r\n        var handles = handleRef.current;\r\n        return function () { return handles.forEach(function (handle) { return cancelAnimationFrame(handle); }); };\r\n    }, [dontClean, handleRef]);\r\n    return (0, react_1.useCallback)(function (callback) {\r\n        var handle = requestAnimationFrame(function () {\r\n            handleRef.current.splice(handleRef.current.indexOf(handle), 1);\r\n            callback();\r\n        });\r\n        handleRef.current.push(handle);\r\n    }, [handleRef]);\r\n}\r\nexports.useCallSoon = useCallSoon;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useGetOriginalItemOrder = void 0;\r\nvar ControlledTreeEnvironment_1 = require(\"./controlledEnvironment/ControlledTreeEnvironment\");\r\nvar useStableHandler_1 = require(\"./useStableHandler\");\r\nvar useGetOriginalItemOrder = function () {\r\n    var env = (0, ControlledTreeEnvironment_1.useTreeEnvironment)();\r\n    return (0, useStableHandler_1.useStableHandler)(function (treeId, items) {\r\n        return items\r\n            .map(function (item) {\r\n            return [\r\n                item,\r\n                env.linearItems[treeId].findIndex(function (linearItem) { return linearItem.item === item.index; }),\r\n            ];\r\n        })\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            .sort(function (_a, _b) {\r\n            var _ = _a[0], aPos = _a[1];\r\n            var _2 = _b[0], bPos = _b[1];\r\n            return aPos - bPos;\r\n        })\r\n            .map(function (_a) {\r\n            var item = _a[0];\r\n            return item;\r\n        });\r\n    });\r\n};\r\nexports.useGetOriginalItemOrder = useGetOriginalItemOrder;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useHtmlElementEventListener = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useStableHandler_1 = require(\"./useStableHandler\");\r\nvar useHtmlElementEventListener = function (element, type, listener) {\r\n    var stableListener = (0, useStableHandler_1.useStableHandler)(listener);\r\n    (0, react_1.useEffect)(function () {\r\n        if (element) {\r\n            element.addEventListener(type, stableListener);\r\n            return function () { return element.removeEventListener(type, stableListener); };\r\n        }\r\n        return function () { };\r\n    }, [element, stableListener, type]);\r\n};\r\nexports.useHtmlElementEventListener = useHtmlElementEventListener;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useIsMounted = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useIsMounted = function () {\r\n    var mountedRef = (0, react_1.useRef)(false);\r\n    (0, react_1.useEffect)(function () {\r\n        mountedRef.current = true;\r\n        return function () {\r\n            mountedRef.current = false;\r\n        };\r\n    }, []);\r\n    return mountedRef;\r\n};\r\nexports.useIsMounted = useIsMounted;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useRefCopy = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useRefCopy = function (value) {\r\n    var ref = (0, react_1.useRef)(value);\r\n    ref.current = value;\r\n    return ref;\r\n};\r\nexports.useRefCopy = useRefCopy;\r\n","\"use strict\";\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useSideEffect = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useSideEffect = function (effect, deps, changeOn) {\r\n    var previousRef = (0, react_1.useRef)();\r\n    (0, react_1.useEffect)(function () {\r\n        if (!previousRef.current) {\r\n            previousRef.current = __spreadArray([], changeOn, true);\r\n            effect();\r\n        }\r\n        else {\r\n            var changed = previousRef.current.some(function (v, i) { return v !== changeOn[i]; });\r\n            if (changed) {\r\n                previousRef.current = __spreadArray([], changeOn, true);\r\n                effect();\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, __spreadArray(__spreadArray([], deps, true), changeOn, true));\r\n};\r\nexports.useSideEffect = useSideEffect;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useStableHandler = void 0;\r\nvar react_1 = require(\"react\");\r\nvar useRefCopy_1 = require(\"./useRefCopy\");\r\nvar useStableHandler = function (handler) {\r\n    var handlerRef = (0, useRefCopy_1.useRefCopy)(handler);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    return (0, react_1.useCallback)((function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return handlerRef.current.apply(handlerRef, args);\r\n    }), [\r\n        handlerRef,\r\n    ]);\r\n};\r\nexports.useStableHandler = useStableHandler;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getDocument = exports.buildMapForTrees = void 0;\r\nvar buildMapForTrees = function (treeIds, build) {\r\n    return treeIds\r\n        .map(function (id) { return [id, build(id)]; })\r\n        .reduce(function (a, _a) {\r\n        var _b;\r\n        var id = _a[0], obj = _a[1];\r\n        return (__assign(__assign({}, a), (_b = {}, _b[id] = obj, _b)));\r\n    }, {});\r\n};\r\nexports.buildMapForTrees = buildMapForTrees;\r\nvar getDocument = function () {\r\n    return typeof document !== 'undefined' ? document : undefined;\r\n};\r\nexports.getDocument = getDocument;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.waitFor = void 0;\r\nvar waitFor = function (check, intervalMs, timeoutMs) {\r\n    if (intervalMs === void 0) { intervalMs = 50; }\r\n    if (timeoutMs === void 0) { timeoutMs = 10000; }\r\n    return new Promise(function (resolve) {\r\n        if (check()) {\r\n            resolve();\r\n        }\r\n        var complete;\r\n        var interval = setInterval(function () {\r\n            if (check()) {\r\n                complete();\r\n            }\r\n        }, intervalMs);\r\n        var timeout = setTimeout(function () {\r\n            complete();\r\n        }, timeoutMs);\r\n        complete = function () {\r\n            clearInterval(interval);\r\n            clearTimeout(timeout);\r\n            resolve();\r\n        };\r\n    });\r\n};\r\nexports.waitFor = waitFor;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1024__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3607);\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__1024__","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","EventEmitter","options","handlerCount","handlers","prototype","get","filter","h","enumerable","configurable","emit","payload","_a","_b","promises","_i","_c","handler","res","_d","logger","all","on","off","handlerId","delete","__assign","assign","s","i","arguments","p","hasOwnProperty","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","__setModuleDefault","__importStar","mod","ControlledTreeEnvironment","useTreeEnvironment","React","react_1","InteractionManagerProvider_1","DragAndDropProvider_1","EnvironmentActionsProvider_1","useControlledTreeEnvironmentProps_1","TreeEnvironmentContext","createContext","useContext","forwardRef","props","ref","environmentContextProps","useControlledTreeEnvironmentProps","viewState","keys","trees","treeId","focusedItem","items","rootItem","children","createElement","Provider","InteractionManagerProvider","DragAndDropProvider","EnvironmentActionsProvider","useInteractionManager","types_1","ControlledTreeEnvironment_1","mergeInteractionManagers_1","buildInteractionMode_1","InteractionManagerContext","environment","defaultInteractionMode","interactionManager","useMemo","extends","mergeInteractionManagers","buildInteractionMode","InteractionMode","ClickItemToExpand","DoubleClickItemToExpandInteractionManager_1","ClickItemToExpandInteractionManager_1","ClickArrowToExpandInteractionManager_1","mode","DoubleClickItemToExpand","DoubleClickItemToExpandInteractionManager","ClickItemToExpandInteractionManager","ClickArrowToExpand","ClickArrowToExpandInteractionManager","Error","concat","isOutsideOfContainer","computeItemHeightArray","computeItemHeight","utils_1","firstItem","getDocument","querySelector","offsetHeight","document","console","log","querySelectorAll","itemHeights","Array","from","map","item","treeBb","clientX","left","right","clientY","top","bottom","main","fallback","createInteractiveElementProps","actions","renderFlags","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","scrollIntoView_1","useRenderers_1","getItemsLinearly_1","useRefCopy_1","onExpandItemProp","onExpandItem","onCollapseProp","onCollapseItem","onDropProp","onDrop","useState","setTrees","activeTreeId","setActiveTreeId","treeIds","onFocusItem","autoFocus","onRegisterTree","onUnregisterTree","onFocusItemRef","useRefCopy","viewStateRef","linearItems","buildMapForTrees","getItemsLinearly","onFocusItemHandler","useCallback","setDomFocus","_e","_f","_g","newItem","index","activeElement","attributes","getNamedItem","focus","scrollIntoView","current","registerTree","tree","unregisterTree","target","focusTree","focusItem","setActiveTree","treeIdOrSetStateFunction","autoFocusTree","maybeFocusTree","contains","oldValue","renderers","useRenderers","useLinearItems","useDragAndDrop","useCanDropAt_1","useGetViableDragPositions_1","useSideEffect_1","useCallSoon_1","useStableHandler_1","useGetOriginalItemOrder_1","useDraggingPosition_1","DragAndDropContext","isProgrammaticallyDragging","setIsProgrammaticallyDragging","viableDragPositions","setViableDragPositions","programmaticDragIndex","setProgrammaticDragIndex","draggingPosition","setDraggingPosition","getViableDragPositions","useGetViableDragPositions","callSoon","useCallSoon","getOriginalItemOrder","useGetOriginalItemOrder","useDraggingPosition","initiateDraggingPosition","resetDraggingPosition","draggingItems","getDraggingPosition","itemHeight","itemsHeightArray","resetProgrammaticDragIndexForCurrentTree","focusItem_1","treeDragPositions","newPos","findIndex","pos","targetType","targetItem","parentItem","childIndex","Math","min","resetState","useStableHandler","useSideEffect","canDropAt","useCanDropAt","onDragOverTreeHandler","containerRef","newDraggingPosition","onSelectItems","performDrag","onDropHandler","onStartDraggingItems","treeViableDragPositions","startProgrammaticDrag","canDragAndDrop","draggingItems_1","selectedItems","resolvedDraggingItems","id","canDrag","setTimeout","abortProgrammaticDrag","completeProgrammaticDrag","programmaticDragUp","oldIndex","max","programmaticDragDown","dnd","useEffect","window","addEventListener","removeEventListener","DraggingPositionEvaluation","env","hoveringPosition","getParentOfLinearItem","linearIndex","offset","indentation","getEmptyTreeDragPosition","depth","maybeRedirectToParent","canReorderItems","canDropOnNonFolder","isFolder","parentLinearIndex","parent_1","parent","maybeReparentUpwards","treeLinearItems","deepestDepth","legalDropDepthCount","insertionItemAbove","droppingIndent","newParent","reparentedChildIndex","isDescendant","linePosition","maybeRedirectInsideOpenFolder","nextItem","canDropBelowOpenFolders","maybeMapToBottomOffset","priorItem","depthDistanceToPrior","canDropAtCurrentTarget","_this","targetItemData","canDropOnFolder","some","draggingItem","reparented","areDraggingItemsDescendantOfTarget","newChildIndex","itemLinearIndex","potentialParents","find","resolvedItem","layoutUtils_1","DraggingPositionEvaluation_1","useGetParentOfLinearItem_1","dragCode","useRef","setDraggingItems","useGetGetParentOfLinearItem","isNewDragPosition","newDragCode","getHoveringPosition","getBoundingClientRect","clientYRelativeToTreeTop","cumulativeHeight","targetLinearItem","renderDepthOffset","floor","lineThreshold","__spreadArray","to","pack","ar","l","slice","itemPosition","topPosition","bottomPosition","reduce","a","b","position","useEnvironmentActions","useCreatedEnvironmentRef_1","waitFor_1","EnvironmentActionsContext","recursiveExpand","itemId","onExpand","_loop_1","childId","waitFor","onRenameItem","onPrimaryAction","itemsRef","collapseItem","expandItem","moveFocusDown","currentFocusIndex","newIndex","moveFocusUp","renameItem","name","selectItems","itemsIds","toggleItemExpandedState","expandedItems","includes","toggleItemSelectStatus","invokePrimaryAction","expandSubsequently","itemIds","rest","expandAll","collapseAll","moveProgrammaticDragPositionDown","moveProgrammaticDragPositionUp","useCreatedEnvironmentRef","useImperativeHandle","treeEnvironmentContext","dragAndDropContext","defaultKeyboardBindings","expandSiblings","moveFocusToFirstItem","moveFocusToLastItem","primaryAction","abortRenameItem","toggleSelectItem","abortSearch","startSearch","selectAll","startProgrammaticDnd","completeProgrammaticDnd","abortProgrammaticDnd","useHotkey","useHtmlElementEventListener_1","useKeyboardBindings_1","elementsThatCanTakeText","combinationName","onHit","active","activatableWhileFocusingInput","pressedKeys","keyboardBindings","useKeyboardBindings","possibleCombinations","combination","split","useHtmlElementEventListener","tagName","toLowerCase","isContentEditable","key","pressedKeysLowercase_1","test","preventDefault","pressedKeysLowercase","useKey","defaultKeyboardBindings_1","__exportStar","INTERNALS","TreeItemElement_1","TreeItemChildren_1","TreeItemElement","TreeItemChildren","isControlKey_1","onClick","shiftKey","selectUpTo","isControlKey","isSelected","unselectItem","addToSelectedItems","selectItem","canInvokePrimaryActionOnItemContainer","onFocus","onDragStart","dataTransfer","dropEffect","startDragging","onDragOver","draggable","isRenaming","tabIndex","isFocused","toggleExpandedState","onDoubleClick","ctrlKey","navigator","platform","toUpperCase","metaKey","__importDefault","createDefaultRenderers","cx","classNames","cn","join","renderItemTitle","title","context","info","isSearching","isSearchMatching","startIndex","search","default","Fragment","className","renderItemArrow","arrowProps","isExpanded","version","xmlns","xmlnsXlink","x","viewBox","enableBackground","xmlSpace","fillRule","clipRule","d","renderItem","arrow","InteractiveComponent","type","itemContainerWithChildrenProps","isDraggingOver","itemContainerWithoutChildrenProps","style","paddingLeft","interactiveElementProps","renderRenameInput","inputProps","inputRef","submitButtonProps","submitButtonRef","formProps","renderTreeContainer","containerProps","areItemsSelected","minHeight","renderItemsContainer","renderDragBetweenLine","lineProps","renderSearchInput","renderLiveDescriptorContainer","clip","clipPath","height","overflow","whiteSpace","width","createDefaultRenderers_1","defaultRenderers","customRenderers","entries","acc","keyMapped","displayName","SearchInput","useHotkey_1","Tree_1","useSearchMatchFocus_1","useViewState_1","useTree","setSearch","renamingItem","useViewState","isActiveTree","useSearchMatchFocus","clearSearch","unicode","charCodeAt","canSearch","canSearchByStartingTyping","altKey","onChange","onBlur","el","defaultMatcher","itemTitle","defaultMatcher_1","useLinearItems_1","doesSearchMatchItem","getItemTitle","TreeActionsProvider","useTreeActions","useCreatedTreeRef_1","envActions","abortRenamingItem","setRenamingItem","completeRenamingItem","startRenamingItem","stopRenamingItem","useCreatedTreeRef","treeContext","treeInformation","childElements","child","itemIndex","role","parentId","useTreeItemRenderContext_1","TreeItemRenamingInput_1","hasBeenRequested","setHasBeenRequested","renderContext","useTreeItemRenderContext","onMissingItems","shouldRenderChildren","titleComponent","TreeItemRenamingInput","arrowComponent","setTitle","abort","onAbortRenamingItem","confirm","select","relatedTarget","stopPropagation","onSubmit","useSelectUpTo_1","useSelectUpTo","_h","_j","currentlySelectedItems","isItemPartOfSelectedItems","selectedItem","canDragCurrentlySelectedItems","canMove","canDragThisItem","canDropOn","overrideOldSelection","orderedItems","isDraggingOverParent","viewStateFlags","isArray","DragBetweenLine","LiveDescription","defaultLiveDescriptors_1","resolveLiveDescriptor_1","LiveWrapper","live","dangerouslySetInnerHTML","__html","descriptors","liveDescriptors","defaultLiveDescriptors","MainWrapper","resolveLiveDescriptor","searching","programmaticallyDragging","programmaticallyDraggingTarget","introduction","MaybeLiveDescription","LiveDescription_1","showLiveDescription","Tree","TreeManager_1","useCreatedTreeInformation_1","TreeActionsProvider_1","TreeContext","useCreatedTreeInformation","treeContextProps","treeLabel","treeLabelledBy","TreeManager","DragBetweenLine_1","useFocusWithin_1","useTreeKeyboardBindings_1","SearchInput_1","MaybeLiveDescription_1","useTreeKeyboardBindings","useFocusWithin","oldTreeId","rootChildren","treeChildren","onMouseDown","descriptor","replace","variableNameWithBrackets","variableName","parentTitle","startsWith","element","scrollIntoViewIfNeeded","boundingBox","innerHeight","documentElement","clientHeight","innerWidth","clientWidth","onFocusIn","onFocusOut","focusWithin","setFocusWithin","isLoosingFocusFlag","useMoveFocusToIndex","computeNewIndex","newIndexBounded","newFocusItem","startingAt","focusedItemPrevious","previous","selectMergedItems","oldSelection","newSelection","merged","lastFocus_1","selectionStart","linearItem","selectionEnd","selection","useKey_1","useMoveFocusToIndex_1","moveFocusToIndex","currentIndex","itemDepth","parentIndex","canRename","onStartRenamingItem","CompleteTreeDataProvider","provider","getTreeItem","getTreeItems","onChangeItemChildren","newChildren","onDidChangeTreeData","listener","dispose","StaticTreeDataProvider","EventEmitter_1","setItemName","onDidChangeTreeDataEmitter","data","UncontrolledTreeEnvironment","CompleteTreeDataProvider_1","useIsMounted_1","currentItems","setCurrentItems","setViewState","missingItemIds","dataProvider","isMounted","useIsMounted","writeItems","newItems","oldItems","amendViewState","constructNewState","oldState","changedItemIds","old","oldFocusedItem","disableMultiselect","newSelected_1","itemsIndices","itemsPriorToInsertion","items_1","state_1","newParentChildren","values","potentialParent","isOldItemPriorToNewItem","Infinity","c","splice","dontClean","handleRef","handles","forEach","handle","cancelAnimationFrame","callback","requestAnimationFrame","sort","aPos","stableListener","mountedRef","effect","deps","changeOn","previousRef","handlerRef","args","build","obj","check","intervalMs","timeoutMs","complete","interval","setInterval","timeout","clearInterval","clearTimeout","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}